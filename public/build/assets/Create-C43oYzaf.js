import{C as M,r as w,l as B,c as f,o as u,a as l,u as s,m as $,w as r,b as e,d as D,e as z,h as N,F as k,j as A,t as a,i as q,n as O,q as U,A as y,f as m,P as g}from"./app-CG_txIVR.js";import{_ as F}from"./AuthenticatedLayout-DJIiH2wS.js";import{_ as C}from"./Button-Kx0rHSGw.js";import{_ as T}from"./Input-DmtGEFtB.js";import{_ as h}from"./Card-BOaGNwsG.js";import{_ as L}from"./Alert-DDOMzzWl.js";import{d as j}from"./vuedraggable.umd-D1bbyUnh.js";const P={class:"md:flex md:items-center md:justify-between"},E={class:"min-w-0 flex-1"},G={class:"flex items-center"},H={class:"max-w-7xl"},I={class:"list-disc list-inside"},J={class:"p-6 space-y-6"},K={class:"mt-1"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},R={class:"p-6"},W={class:"flex items-center justify-between mb-4"},X={class:"text-sm text-neutral-500"},Y={class:"flex items-center justify-between p-3 m-2 bg-white border border-neutral-200 rounded-lg cursor-move hover:shadow-sm transition-shadow duration-200"},Z={class:"flex items-center"},ee={class:"font-medium text-neutral-900"},te={class:"flex items-center text-sm text-neutral-500"},se={class:"p-6"},oe={class:"flex items-center justify-between mb-4"},re={class:"flex items-center text-sm"},ne={class:"text-neutral-500 mr-4"},le={class:"flex items-center text-neutral-900 font-medium"},ie={class:"flex items-center justify-between p-3 m-2 bg-white border border-neutral-200 rounded-lg cursor-move hover:shadow-sm transition-shadow duration-200"},ae={class:"flex items-center"},de={class:"flex items-center justify-center h-6 w-6 rounded-full bg-neutral-100 text-neutral-500 text-sm font-medium mr-3"},ue={class:"font-medium text-neutral-900"},me={class:"flex items-center text-sm text-neutral-500"},ce={class:"flex items-center justify-end space-x-4"},fe={key:0},xe={key:1},ke={__name:"Create",props:{band:{type:Object,required:!0},songs:{type:Array,required:!0}},setup(c){const p=c,n=M({band_id:p.band.id,name:"",description:"",song_order:[],total_duration:0}),x=w([...p.songs]),d=w([]),b=()=>{n.total_duration=d.value.reduce((i,t)=>i+t.duration_seconds,0)},v=i=>{const t=Math.floor(i/3600),o=Math.floor(i%3600/60),_=i%60;return t>0?`${t}:${o.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`:`${o}:${_.toString().padStart(2,"0")}`},S=B(()=>v(n.total_duration)),V=()=>{n.song_order=d.value.map(i=>i.id),n.post(route("setlists.store",p.band.id))};return(i,t)=>(u(),f(k,null,[l(s($),{title:"Create Setlist"}),l(F,null,{header:r(()=>[e("div",P,[e("div",E,[e("div",G,[l(s(g),{href:i.route("bands.show",c.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:r(()=>[m(a(c.band.name),1)]),_:1},8,["href"]),t[5]||(t[5]=e("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),l(s(g),{href:i.route("setlists.index",c.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:r(()=>t[4]||(t[4]=[m(" Setlists ")])),_:1},8,["href"])]),t[6]||(t[6]=e("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Create New Setlist ",-1)),t[7]||(t[7]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Create a new setlist by dragging and dropping songs ",-1))])])]),default:r(()=>[e("div",H,[e("form",{onSubmit:D(V,["prevent"]),class:"space-y-6"},[Object.keys(s(n).errors).length>0?(u(),z(s(L),{key:0,type:"error"},{default:r(()=>[e("ul",I,[(u(!0),f(k,null,A(s(n).errors,o=>(u(),f("li",{key:o},a(o),1))),128))])]),_:1})):N("",!0),l(s(h),null,{default:r(()=>[e("div",J,[e("div",null,[l(s(T),{modelValue:s(n).name,"onUpdate:modelValue":t[0]||(t[0]=o=>s(n).name=o),type:"text",label:"Setlist Name",error:s(n).errors.name,required:""},null,8,["modelValue","error"]),t[8]||(t[8]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Give your setlist a memorable name ",-1))]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-neutral-700"}," Description (Optional) ",-1)),e("div",K,[q(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>s(n).description=o),rows:"3",class:O(["block w-full rounded-lg shadow-sm transition-colors duration-200","border-neutral-300 focus:border-primary-500 focus:ring-primary-500",{"border-error-500 focus:border-error-500 focus:ring-error-500":s(n).errors.description}])},null,2),[[U,s(n).description]])]),t[10]||(t[10]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Add any notes or context about this setlist ",-1))])])]),_:1}),e("div",Q,[l(s(h),null,{default:r(()=>[e("div",R,[e("div",W,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-neutral-900"},"Available Songs",-1)),e("span",X,a(x.value.length)+" songs ",1)]),l(s(j),{modelValue:x.value,"onUpdate:modelValue":t[2]||(t[2]=o=>x.value=o),group:{name:"songs"},"item-key":"id",class:"min-h-[400px] border-2 border-dashed border-neutral-200 rounded-lg",onChange:b},y({item:r(({element:o})=>[e("div",Y,[e("div",Z,[t[12]||(t[12]=e("svg",{class:"h-5 w-5 text-neutral-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})],-1)),e("span",ee,a(o.name),1)]),e("div",te,[t[13]||(t[13]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+a(v(o.duration_seconds)),1)])])]),_:2},[x.value.length===0?{name:"footer",fn:r(()=>[t[14]||(t[14]=e("div",{class:"flex flex-col items-center justify-center h-40 text-neutral-500"},[e("svg",{class:"h-12 w-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),e("p",{class:"text-sm"},"All songs have been added to the setlist")],-1))]),key:"0"}:void 0]),1032,["modelValue"])])]),_:1}),l(s(h),null,{default:r(()=>[e("div",se,[e("div",oe,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-neutral-900"},"Setlist",-1)),e("div",re,[e("span",ne,a(d.value.length)+" songs ",1),e("span",le,[t[15]||(t[15]=e("svg",{class:"h-4 w-4 mr-1 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+a(S.value),1)])])]),l(s(j),{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=o=>d.value=o),group:{name:"songs"},"item-key":"id",class:"min-h-[400px] border-2 border-dashed border-neutral-200 rounded-lg",onChange:b},y({item:r(({element:o})=>[e("div",ie,[e("div",ae,[e("div",de,a(d.value.indexOf(o)+1),1),e("span",ue,a(o.name),1)]),e("div",me,[t[17]||(t[17]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m(" "+a(v(o.duration_seconds)),1)])])]),_:2},[d.value.length===0?{name:"footer",fn:r(()=>[t[18]||(t[18]=e("div",{class:"flex flex-col items-center justify-center h-40 text-neutral-500"},[e("svg",{class:"h-12 w-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l4-4 4 4m0 6l-4 4-4-4"})]),e("p",{class:"text-sm"},"Drag songs here to add them to the setlist")],-1))]),key:"0"}:void 0]),1032,["modelValue"])])]),_:1})]),e("div",ce,[l(s(g),{href:i.route("setlists.index",c.band.id)},{default:r(()=>[l(s(C),{type:"button",variant:"outline"},{default:r(()=>t[19]||(t[19]=[m(" Cancel ")])),_:1})]),_:1},8,["href"]),l(s(C),{type:"submit",variant:"primary",disabled:s(n).processing||d.value.length===0},{default:r(()=>[s(n).processing?(u(),f("span",fe,"Creating...")):(u(),f("span",xe,"Create Setlist"))]),_:1},8,["disabled"])])],32)])]),_:1})],64))}};export{ke as default};
