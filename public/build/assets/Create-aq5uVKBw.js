import{C as j,r as F,p as c,x as N,c as d,o as i,a as o,u as e,m as A,w as a,b as r,d as B,e as D,h as G,F as v,j as O,t as k,i as M,n as $,q,P as f,f as b}from"./app-_FzgvGiq.js";import{_ as L}from"./AuthenticatedLayout-Cc7-ifEB.js";import{_ as y}from"./DSTooltip.vue_vue_type_style_index_0_lang-C9s17ltE.js";import{_ as p}from"./Input-O5QtAnXt.js";import{_ as w}from"./Card-Beu8KTX8.js";import{_ as E}from"./Alert-D7E63vwv.js";import{D as H}from"./DSDurationInput-BbyvmaQX.js";import I from"./AddFileSection-Bp3DhV1c.js";import"./app-DDkZEAQt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"md:flex md:items-center md:justify-between max-w-2xl"},T={class:"min-w-0 flex-1"},z={class:"flex items-center"},R={class:"flex flex-col sm:flex-row sm:justify-between"},Y={class:"py-2"},J={class:"flex justify-end space-x-3"},K={key:0},Q={key:1},W={class:"list-disc list-inside"},X={class:"grid grid-cols-2 gap-4"},Z={class:"mt-1"},ee={class:"flex items-center justify-end space-x-4"},te={key:0},se={key:1},fe={__name:"Create",props:{band:{type:Object,required:!0}},setup(u){const x=u,s=j({band_id:x.band.id,name:null,duration:null,duration_seconds:null,notes:null,url:null,bpm:null,artist:null,files:[],spotify_link:null}),m=F([]),V=()=>{m.value.length<10&&m.value.push({type:"",file:null})},_=n=>{m.value.splice(n,1)},h=(n,t)=>{const l=n.target.files[0];l&&(m.value[t].file=l)},g=()=>{s.files=m.value.filter(n=>n.file&&n.type).map(n=>({type:n.type,instrument:n.instrument,file:n.file})),s.post(route("songs.store",x.band.id))},S=c(()=>!!s.name||!!s.duration||!!s.notes||!!s.url||!!s.artist||!!s.bpm),C=N(),U=c(()=>C.props.trial||{});return c(()=>{var n,t;return(n=U.value)!=null&&n.isSubscribed?!0:((t=x.songs)==null?void 0:t.length)<10}),(n,t)=>(i(),d(v,null,[o(e(A),{title:"Add New Song"}),o(L,{class:"space-y-2"},{header:a(()=>[r("div",P,[r("div",T,[r("div",z,[o(e(f),{href:n.route("bands.show",u.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:a(()=>[b(k(u.band.name),1)]),_:1},8,["href"]),t[9]||(t[9]=r("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),o(e(f),{href:n.route("songs.index",u.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:a(()=>t[8]||(t[8]=[b(" Songs ")])),_:1},8,["href"])]),r("div",R,[t[11]||(t[11]=r("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Add New Song ",-1)),r("div",Y,[o(e(f),{href:n.route("songs.bulk-create",u.band.id)},{default:a(()=>[o(e(y),{variant:"secondary",class:"w-full sm:w-auto"},{default:a(()=>t[10]||(t[10]=[r("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),b(" Add Multiple Songs ")])),_:1})]),_:1},8,["href"])])]),t[12]||(t[12]=r("p",{class:"mt-1 text-sm text-neutral-500"}," Add a new song to your band's library ",-1))])])]),default:a(()=>[o(e(w),{class:"max-w-2xl space-y-6 p-6 mb-4",disabled:S.value},{default:a(()=>[t[13]||(t[13]=r("p",{class:"text-sm text-gray-600"},"Enter a Spotify track URL to import its details.",-1)),o(e(p),{modelValue:e(s).spotify_link,"onUpdate:modelValue":t[0]||(t[0]=l=>e(s).spotify_link=l),type:"url",placeholder:"https://open.spotify.com/track/abc123",label:"Spotify Link",error:e(s).errors.spotify_link,required:""},null,8,["modelValue","error"]),r("div",J,[o(e(y),{onClick:g,variant:"primary",disabled:e(s).processing},{default:a(()=>[e(s).processing?(i(),d("span",K,"Importing...")):(i(),d("span",Q,"Import Song"))]),_:1},8,["disabled"])])]),_:1},8,["disabled"]),o(e(w),{class:"max-w-2xl",disabled:!!e(s).spotify_link},{default:a(()=>[r("form",{onSubmit:B(g,["prevent"]),class:"space-y-6 p-6"},[t[18]||(t[18]=r("p",{class:"text-sm text-gray-600"},"Or manually add a song's for your list.",-1)),Object.keys(e(s).errors).length>0?(i(),D(e(E),{key:0,type:"error"},{default:a(()=>[r("ul",W,[(i(!0),d(v,null,O(e(s).errors,l=>(i(),d("li",{key:l},k(l),1))),128))])]),_:1})):G("",!0),r("div",X,[r("div",null,[o(e(p),{modelValue:e(s).name,"onUpdate:modelValue":t[1]||(t[1]=l=>e(s).name=l),type:"text",label:"Song Name",error:e(s).errors.name,required:""},null,8,["modelValue","error"])]),r("div",null,[o(e(p),{modelValue:e(s).artist,"onUpdate:modelValue":t[2]||(t[2]=l=>e(s).artist=l),type:"text",label:"Artist (Optional)",error:e(s).errors.artist,placeholder:""},null,8,["modelValue","error"])]),r("div",null,[o(e(H),{modelValue:e(s).duration,"onUpdate:modelValue":t[3]||(t[3]=l=>e(s).duration=l),"onUpdate:seconds":t[4]||(t[4]=l=>e(s).duration_seconds=l),label:"Duration",error:e(s).errors.duration_seconds,required:""},null,8,["modelValue","error"])]),r("div",null,[o(e(p),{modelValue:e(s).bpm,"onUpdate:modelValue":t[5]||(t[5]=l=>e(s).bpm=l),type:"number",label:"BPM (Optional)",error:e(s).errors.bpm},null,8,["modelValue","error"])])]),r("div",null,[t[14]||(t[14]=r("label",{class:"block text-sm font-medium text-neutral-700"}," Notes (Optional) ",-1)),r("div",Z,[M(r("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>e(s).notes=l),rows:"4",class:$(["block w-full rounded-lg shadow-sm transition-colors duration-200","border-neutral-300 focus:border-primary-500 focus:ring-primary-500",{"border-error-500 focus:border-error-500 focus:ring-error-500":e(s).errors.notes}])},null,2),[[q,e(s).notes]])]),t[15]||(t[15]=r("p",{class:"mt-1 text-sm text-neutral-500"}," Add any notes about the song, such as key changes or special instructions ",-1))]),r("div",null,[o(e(p),{modelValue:e(s).url,"onUpdate:modelValue":t[7]||(t[7]=l=>e(s).url=l),type:"url",label:"External Link (Optional)",error:e(s).errors.url,placeholder:"https://"},null,8,["modelValue","error"]),t[16]||(t[16]=r("p",{class:"mt-1 text-sm text-neutral-500"}," Link to an external resource (YouTube, Spotify, etc.) ",-1))]),o(I,{fileGroups:m.value,onAddFileGroup:V,onRemoveFileGroup:_,onHandleFileUpload:h},null,8,["fileGroups"]),r("div",ee,[o(e(f),{href:n.route("songs.index",u.band.id)},{default:a(()=>[o(e(y),{type:"button",variant:"outline"},{default:a(()=>t[17]||(t[17]=[b(" Cancel ")])),_:1})]),_:1},8,["href"]),o(e(y),{type:"submit",variant:"primary",disabled:e(s).processing},{default:a(()=>[e(s).processing?(i(),d("span",te,"Creating...")):(i(),d("span",se,"Create Song"))]),_:1},8,["disabled"])])],32)]),_:1},8,["disabled"])]),_:1})],64))}};export{fe as default};
