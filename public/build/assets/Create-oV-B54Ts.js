import{C as F,r as B,x as c,A as M,c as d,o as i,a as o,u as e,m as N,w as n,b as l,d as $,e as g,h as G,F as k,j as O,t as w,i as L,n as q,s as D,P as y,f as p}from"./app-BABaEHeU.js";import{_ as H}from"./AuthenticatedLayout-0Kug1K2J.js";import{_ as f}from"./DSTooltip.vue_vue_type_style_index_0_lang-BvGLClPE.js";import{_ as b}from"./Input-B6L7KIiC.js";import{_ as V}from"./Card-Zg4sBKuJ.js";import{_ as P}from"./Alert-COLoCFxo.js";import{_ as z}from"./DSDurationInput-CZuBAqI6.js";import{_ as E}from"./DSTooltip-aRMZ65wL.js";import T from"./AddFileSection-6-D3FAyS.js";/* empty css            */const I={class:"md:flex md:items-center md:justify-between max-w-2xl"},R={class:"min-w-0 flex-1"},Y={class:"flex items-center"},J={class:"flex flex-col sm:flex-row sm:justify-between"},K={class:"py-2"},Q={class:"flex justify-end space-x-3"},W={key:0},X={key:1},Z={class:"list-disc list-inside"},ee={class:"grid grid-cols-2 gap-4"},te={class:"mt-1"},se={class:"flex items-center justify-end space-x-4"},le={key:0},re={key:1},ye={__name:"Create",props:{band:{type:Object,required:!0}},setup(u){const x=u,s=F({band_id:x.band.id,name:null,duration:null,duration_seconds:null,notes:null,url:null,bpm:null,artist:null,files:[],spotify_link:null}),m=B([]),_=()=>{m.value.length<10&&m.value.push({type:"",file:null})},h=a=>{m.value.splice(a,1)},S=(a,t)=>{const r=a.target.files[0];r&&(m.value[t].file=r)},v=()=>{s.files=m.value.filter(a=>a.file&&a.type).map(a=>({type:a.type,instrument:a.instrument,file:a.file})),s.post(route("songs.store",x.band.id))},C=c(()=>!!s.name||!!s.duration||!!s.notes||!!s.url||!!s.artist||!!s.bpm),U=M(),j=c(()=>U.props.trial||{}),A=c(()=>{var a,t;return(a=j.value)!=null&&a.isSubscribed?!0:((t=x.songs)==null?void 0:t.length)<10});return(a,t)=>(i(),d(k,null,[o(e(N),{title:"Add New Song"}),o(H,{class:"space-y-2"},{header:n(()=>[l("div",I,[l("div",R,[l("div",Y,[o(e(y),{href:a.route("bands.show",u.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:n(()=>[p(w(u.band.name),1)]),_:1},8,["href"]),t[9]||(t[9]=l("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),o(e(y),{href:a.route("songs.index",u.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:n(()=>t[8]||(t[8]=[p(" Songs ")])),_:1},8,["href"])]),l("div",J,[t[13]||(t[13]=l("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Add New Song ",-1)),l("div",K,[A.value?(i(),g(e(y),{key:1,href:a.route("songs.bulk-create",u.band.id)},{default:n(()=>[o(e(f),{variant:"secondary",class:"w-full sm:w-auto"},{default:n(()=>t[12]||(t[12]=[l("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),p(" Add Multiple Songs ")])),_:1})]),_:1},8,["href"])):(i(),g(e(E),{key:0},{content:n(()=>t[11]||(t[11]=[p(" Free trial allows maximum 10 songs. Please subscribe to add more. ")])),default:n(()=>[o(e(f),{variant:"secondary",class:"w-full sm:w-auto",disabled:""},{default:n(()=>t[10]||(t[10]=[l("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),p(" Add Multiple Songs ")])),_:1})]),_:1}))])]),t[14]||(t[14]=l("p",{class:"mt-1 text-sm text-neutral-500"}," Add a new song to your band's library ",-1))])])]),default:n(()=>[o(e(V),{class:"max-w-2xl space-y-6 p-6 mb-4",disabled:C.value},{default:n(()=>[t[15]||(t[15]=l("p",{class:"text-sm text-gray-600"},"Enter a Spotify track URL to import its details.",-1)),o(e(b),{modelValue:e(s).spotify_link,"onUpdate:modelValue":t[0]||(t[0]=r=>e(s).spotify_link=r),type:"url",placeholder:"https://open.spotify.com/track/abc123",label:"Spotify Link",error:e(s).errors.spotify_link,required:""},null,8,["modelValue","error"]),l("div",Q,[o(e(f),{onClick:v,variant:"primary",disabled:e(s).processing},{default:n(()=>[e(s).processing?(i(),d("span",W,"Importing...")):(i(),d("span",X,"Import Song"))]),_:1},8,["disabled"])])]),_:1},8,["disabled"]),o(e(V),{class:"max-w-2xl",disabled:!!e(s).spotify_link},{default:n(()=>[l("form",{onSubmit:$(v,["prevent"]),class:"space-y-6 p-6"},[t[20]||(t[20]=l("p",{class:"text-sm text-gray-600"},"Or manually add a song's for your list.",-1)),Object.keys(e(s).errors).length>0?(i(),g(e(P),{key:0,type:"error"},{default:n(()=>[l("ul",Z,[(i(!0),d(k,null,O(e(s).errors,r=>(i(),d("li",{key:r},w(r),1))),128))])]),_:1})):G("",!0),l("div",ee,[l("div",null,[o(e(b),{modelValue:e(s).name,"onUpdate:modelValue":t[1]||(t[1]=r=>e(s).name=r),type:"text",label:"Song Name",error:e(s).errors.name,required:""},null,8,["modelValue","error"])]),l("div",null,[o(e(b),{modelValue:e(s).artist,"onUpdate:modelValue":t[2]||(t[2]=r=>e(s).artist=r),type:"text",label:"Artist (Optional)",error:e(s).errors.artist,placeholder:""},null,8,["modelValue","error"])]),l("div",null,[o(e(z),{modelValue:e(s).duration,"onUpdate:modelValue":t[3]||(t[3]=r=>e(s).duration=r),"onUpdate:seconds":t[4]||(t[4]=r=>e(s).duration_seconds=r),label:"Duration",error:e(s).errors.duration_seconds,required:""},null,8,["modelValue","error"])]),l("div",null,[o(e(b),{modelValue:e(s).bpm,"onUpdate:modelValue":t[5]||(t[5]=r=>e(s).bpm=r),type:"number",label:"BPM (Optional)",error:e(s).errors.bpm},null,8,["modelValue","error"])])]),l("div",null,[t[16]||(t[16]=l("label",{class:"block text-sm font-medium text-neutral-700"}," Notes (Optional) ",-1)),l("div",te,[L(l("textarea",{"onUpdate:modelValue":t[6]||(t[6]=r=>e(s).notes=r),rows:"4",class:q(["block w-full rounded-lg shadow-sm transition-colors duration-200","border-neutral-300 focus:border-primary-500 focus:ring-primary-500",{"border-error-500 focus:border-error-500 focus:ring-error-500":e(s).errors.notes}])},null,2),[[D,e(s).notes]])]),t[17]||(t[17]=l("p",{class:"mt-1 text-sm text-neutral-500"}," Add any notes about the song, such as key changes or special instructions ",-1))]),l("div",null,[o(e(b),{modelValue:e(s).url,"onUpdate:modelValue":t[7]||(t[7]=r=>e(s).url=r),type:"url",label:"External Link (Optional)",error:e(s).errors.url,placeholder:"https://"},null,8,["modelValue","error"]),t[18]||(t[18]=l("p",{class:"mt-1 text-sm text-neutral-500"}," Link to an external resource (YouTube, Spotify, etc.) ",-1))]),o(T,{fileGroups:m.value,onAddFileGroup:_,onRemoveFileGroup:h,onHandleFileUpload:S},null,8,["fileGroups"]),l("div",se,[o(e(y),{href:a.route("songs.index",u.band.id)},{default:n(()=>[o(e(f),{type:"button",variant:"outline"},{default:n(()=>t[19]||(t[19]=[p(" Cancel ")])),_:1})]),_:1},8,["href"]),o(e(f),{type:"submit",variant:"primary",disabled:e(s).processing},{default:n(()=>[e(s).processing?(i(),d("span",le,"Creating...")):(i(),d("span",re,"Create Song"))]),_:1},8,["disabled"])])],32)]),_:1},8,["disabled"])]),_:1})],64))}};export{ye as default};
