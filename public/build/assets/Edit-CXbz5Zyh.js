import{r as w,l as S,C as N,c as v,o as p,a,u as r,m as U,w as i,b as e,d as q,i as V,n as H,q as C,t as u,h as T,F as M,j as E,f as x,A as F,P as k}from"./app-BhfzyES2.js";import{_ as L}from"./AuthenticatedLayout-C0xoOlZt.js";import{_ as j}from"./Button-BmCsv9hw.js";import{_ as $}from"./Input-C-QsZaTS.js";import{_ as O}from"./Card-x8AhIQVT.js";import{d as P}from"./vuedraggable.umd-CqkuxJCn.js";const Q={class:"md:flex md:items-center md:justify-between"},R={class:"min-w-0 flex-1"},G={class:"flex items-center"},I={class:"space-y-6 max-w-2xl"},J={class:"mt-1"},K={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},W={class:"flex items-center justify-between mb-4"},X={class:"text-sm text-neutral-500"},Y={class:"mb-4"},Z={class:"min-h-[400px] rounded-lg border-2 border-dashed border-neutral-200 p-4 bg-neutral-50 overflow-y-auto"},ee={class:"flex items-center"},te={class:"font-medium text-neutral-900"},se={class:"flex items-center space-x-3"},oe={class:"text-sm text-neutral-500"},re=["onClick"],ne={key:0,class:"text-center py-12"},le={class:"mt-1 text-sm text-neutral-500"},ae={class:"flex items-center justify-between mb-4"},ie={class:"flex items-center text-sm text-neutral-500"},de={class:"p-3 mb-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200"},ue={class:"flex items-center justify-between mb-2"},me={class:"flex items-center"},ce={class:"flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700 text-sm font-medium mr-2"},ve={class:"font-medium text-neutral-900"},pe={class:"flex items-center space-x-3"},fe={class:"text-sm text-neutral-500"},he=["onClick"],xe={class:"mt-2"},ge=["onUpdate:modelValue"],be={class:"flex items-center justify-end space-x-4"},we={key:0},ke={key:1},je={__name:"Edit",props:{band:{type:Object,required:!0},setlist:{type:Object,required:!0},availableSongs:{type:Array,required:!0}},setup(d){const m=d,f=w(""),g=S(()=>{if(!f.value)return h.value;const o=f.value.toLowerCase();return h.value.filter(t=>t.name.toLowerCase().includes(o))}),n=N({band_id:m.band.id,name:m.setlist.name,description:m.setlist.description,song_order:[],total_duration:m.setlist.total_duration}),l=w(m.setlist.songs.sort((o,t)=>o.pivot.order-t.pivot.order)),h=w(m.availableSongs.filter(o=>!l.value.some(t=>t.id===o.id))),y=()=>{n.total_duration=l.value.reduce((o,t)=>o+t.duration_seconds,0)},B=o=>{const t={...o,pivot:{notes:"",order:l.value.length}};l.value.push(t);const s=h.value.findIndex(c=>c.id===o.id);s!==-1&&h.value.splice(s,1),y()},z=o=>{const s={...l.value[o]};delete s.pivot,h.value.push(s),l.value.splice(o,1),y()},b=o=>{const t=Math.floor(o/3600),s=Math.floor(o%3600/60),c=o%60;return t>0?`${t}:${s.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`:`${s}:${c.toString().padStart(2,"0")}`},A=S(()=>b(n.total_duration)),D=()=>{n.song_order=l.value.map(o=>o.id),n.patch(route("setlists.update",[m.band.id,m.setlist.id]),{preserveScroll:!0})};return(o,t)=>(p(),v(M,null,[a(r(U),{title:`Edit ${d.setlist.name} - ${d.band.name}`},null,8,["title"]),a(L,null,{header:i(()=>[e("div",Q,[e("div",R,[e("div",G,[a(r(k),{href:o.route("bands.show",d.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:i(()=>[x(u(d.band.name),1)]),_:1},8,["href"]),t[4]||(t[4]=e("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),a(r(k),{href:o.route("setlists.show",[d.band.id,d.setlist.id]),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:i(()=>[x(u(d.setlist.name),1)]),_:1},8,["href"])]),t[5]||(t[5]=e("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Edit Setlist ",-1))])])]),default:i(()=>[a(r(O),{class:"max-w-5xl mx-auto"},{default:i(()=>[e("form",{onSubmit:q(D,["prevent"]),class:"space-y-6 p-6"},[e("div",I,[a(r($),{modelValue:r(n).name,"onUpdate:modelValue":t[0]||(t[0]=s=>r(n).name=s),type:"text",label:"Setlist Name",error:r(n).errors.name,required:""},null,8,["modelValue","error"]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-neutral-700"}," Description (Optional) ",-1)),e("div",J,[V(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(n).description=s),rows:"3",class:H(["block w-full rounded-lg shadow-sm transition-colors duration-200","border-neutral-300 focus:border-primary-500 focus:ring-primary-500",{"border-error-500 focus:border-error-500 focus:ring-error-500":r(n).errors.description}])},null,2),[[C,r(n).description]])])])]),e("div",K,[e("div",null,[e("div",W,[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-neutral-900"},"Available Songs",-1)),e("span",X,u(g.value.length)+" songs ",1)]),e("div",Y,[a(r($),{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s),type:"text",placeholder:"Search songs...",class:"w-full"},{prefix:i(()=>t[8]||(t[8]=[e("svg",{class:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)])),_:1},8,["modelValue"])]),e("div",Z,[(p(!0),v(M,null,E(g.value,s=>(p(),v("div",{key:s.id,class:"flex items-center justify-between p-3 mb-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200"},[e("div",ee,[t[9]||(t[9]=e("svg",{class:"h-5 w-5 text-neutral-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})],-1)),e("span",te,u(s.name),1)]),e("div",se,[e("span",oe,u(b(s.duration_seconds)),1),e("button",{type:"button",onClick:c=>B(s),class:"p-1 rounded-full text-primary-600 hover:bg-primary-50",title:"Add to setlist"},t[10]||(t[10]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),8,re)])]))),128)),g.value.length===0?(p(),v("div",ne,[t[11]||(t[11]=e("svg",{class:"mx-auto h-12 w-12 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})],-1)),t[12]||(t[12]=e("h3",{class:"mt-2 text-sm font-medium text-neutral-900"},"No songs found",-1)),e("p",le,u(f.value?"Try a different search term.":"All songs are in the setlist."),1)])):T("",!0)])]),e("div",null,[e("div",ae,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-neutral-900"},"Setlist",-1)),e("div",ie,[t[13]||(t[13]=e("svg",{class:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),x(" Total Duration: "+u(A.value),1)])]),a(r(P),{modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=s=>l.value=s),"item-key":"id",handle:".drag-handle",class:"min-h-[400px] rounded-lg border-2 border-dashed border-neutral-200 p-4"},F({item:i(({element:s,index:c})=>[e("div",de,[e("div",ue,[e("div",me,[t[15]||(t[15]=e("span",{class:"drag-handle cursor-move p-1 hover:bg-neutral-50 rounded mr-2"},[e("svg",{class:"h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})])],-1)),e("span",ce,u(c+1),1),e("span",ve,u(s.name),1)]),e("div",pe,[e("span",fe,u(b(s.duration_seconds)),1),e("button",{type:"button",onClick:_=>z(c),class:"p-1 rounded-full text-error-600 hover:bg-error-50",title:"Remove from setlist"},t[16]||(t[16]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)]),8,he)])]),e("div",xe,[V(e("input",{type:"text","onUpdate:modelValue":_=>s.pivot.notes=_,placeholder:"Add performance notes...",class:"block w-full text-sm rounded-lg border-neutral-300 focus:border-primary-500 focus:ring-primary-500"},null,8,ge),[[C,s.pivot.notes]])])])]),_:2},[l.value.length===0?{name:"footer",fn:i(()=>[t[17]||(t[17]=e("div",{class:"text-center py-12"},[e("svg",{class:"mx-auto h-12 w-12 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})]),e("h3",{class:"mt-2 text-sm font-medium text-neutral-900"},"No songs in setlist"),e("p",{class:"mt-1 text-sm text-neutral-500"},"Use the plus button to add songs to your setlist.")],-1))]),key:"0"}:void 0]),1032,["modelValue"])])]),e("div",be,[a(r(k),{href:o.route("setlists.show",[d.band.id,d.setlist.id])},{default:i(()=>[a(r(j),{type:"button",variant:"outline"},{default:i(()=>t[18]||(t[18]=[x(" Cancel ")])),_:1})]),_:1},8,["href"]),a(r(j),{type:"submit",variant:"primary",disabled:r(n).processing||l.value.length===0},{default:i(()=>[r(n).processing?(p(),v("span",we,"Saving changes...")):(p(),v("span",ke,"Save changes"))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})],64))}};export{je as default};
