import{C as B,r as x,c as u,o as m,a as r,u as s,m as E,w as c,b as e,d as O,h as A,i as V,n as L,s as P,F as h,j as C,t as _,P as S,f as w,ab as q,W as D}from"./app-DNDvkvxh.js";import{_ as G}from"./AuthenticatedLayout-lgNrrhGL.js";import{_ as k}from"./DSTooltip.vue_vue_type_style_index_0_lang-tyLMgYsG.js";import{_ as b}from"./Input-kPNMSBDW.js";import{_ as W}from"./AlertModal-BJAoQOOR.js";import{_ as z}from"./DSDurationInput-PY-miDAO.js";/* empty css            */import"./Alert-D2c6zyUd.js";import"./Modal-CGv6VxaL.js";import"./transition-1HpErQZR.js";const H={class:"flex justify-between items-center"},R={class:"text-sm text-gray-600"},X={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6"},K={class:"grid grid-cols-2 gap-4"},Q={class:"mt-1"},Z={key:0,class:"space-y-4"},ee={class:"space-y-2"},te={class:"flex-1"},se={class:"text-sm font-medium text-neutral-900"},oe={class:"text-sm text-neutral-500"},le={class:"flex items-center space-x-2"},ne=["onClick"],re={class:"space-y-4"},ae={class:"flex justify-between items-center"},ie={class:"space-y-2"},de={class:"flex-1"},ue=["onUpdate:modelValue"],me={class:"flex-1"},pe=["onChange"],ce=["onClick"],fe={class:"flex items-center justify-end gap-4"},ve={key:0},be={key:1},De={__name:"Edit",props:{band:{type:Object,required:!0},song:{type:Object,required:!0}},setup(i){const F=l=>{const t=Math.floor(l/60),d=l%60;return`${t}:${d.toString().padStart(2,"0")}`},a=i,o=B({band_id:a.band.id,name:a.song.name,artist:a.song.artist,duration:F(a.song.duration_seconds),duration_seconds:a.song.duration_seconds,notes:a.song.notes,url:a.song.url,files:[]}),p=x([]),g=x(null),y=x(null),M=()=>{p.value.length<10&&p.value.push({type:"",file:null})},$=l=>{p.value.splice(l,1)},T=(l,t)=>{const d=l.target.files[0];d&&(p.value[t].file=d)},U=l=>{y.value=l,g.value.open()},j=()=>{D.delete(route("songs.files.destroy",[a.band.id,a.song.id,y.value.id]),{preserveScroll:!0,onSuccess:()=>{g.value.close(),y.value=null}})},N=()=>{const l=new FormData;l.append("_method","PATCH"),l.append("band_id",o.band_id.toString()),l.append("name",o.name),l.append("duration_seconds",o.duration_seconds.toString()),o.artist&&l.append("artist",o.artist),o.duration&&l.append("duration",o.duration),o.notes&&l.append("notes",o.notes),o.url&&l.append("url",o.url),p.value.filter(t=>t.file&&t.type).forEach((t,d)=>{l.append(`files[${d}][type]`,t.type),l.append(`files[${d}][file]`,t.file)}),D.post(route("songs.update",[a.band.id,a.song.id]),l,{preserveScroll:!0,forceFormData:!0})};return(l,t)=>(m(),u(h,null,[r(s(E),{title:`Edit ${i.song.name} - ${i.band.name}`},null,8,["title"]),r(G,null,{header:c(()=>[e("div",H,[e("div",null,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Edit Song ",-1)),e("p",R,_(i.band.name),1)])])]),default:c(()=>{var d;return[e("div",X,[e("div",Y,[e("div",I,[e("div",J,[e("form",{onSubmit:O(N,["prevent"]),class:"space-y-6"},[e("div",K,[e("div",null,[r(s(b),{modelValue:s(o).name,"onUpdate:modelValue":t[0]||(t[0]=n=>s(o).name=n),type:"text",label:"Song Name",error:s(o).errors.name,required:""},null,8,["modelValue","error"])]),e("div",null,[r(s(b),{modelValue:s(o).artist,"onUpdate:modelValue":t[1]||(t[1]=n=>s(o).artist=n),type:"text",label:"Artist (Optional)",error:s(o).errors.artist,placeholder:""},null,8,["modelValue","error"])]),e("div",null,[r(s(z),{modelValue:s(o).duration,"onUpdate:modelValue":t[2]||(t[2]=n=>s(o).duration=n),"onUpdate:seconds":t[3]||(t[3]=n=>s(o).duration_seconds=n),label:"Duration",required:""},null,8,["modelValue"])]),e("div",null,[r(s(b),{modelValue:s(o).bpm,"onUpdate:modelValue":t[4]||(t[4]=n=>s(o).bpm=n),type:"number",label:"BPM (Optional)",error:s(o).errors.bpm},null,8,["modelValue","error"])])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-neutral-700"}," Notes (Optional) ",-1)),e("div",Q,[V(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=n=>s(o).notes=n),rows:"4",class:L(["block w-full rounded-lg shadow-sm transition-colors duration-200","border-neutral-300 focus:border-primary-500 focus:ring-primary-500",{"border-error-500 focus:border-error-500 focus:ring-error-500":s(o).errors.notes}])},null,2),[[P,s(o).notes]])]),t[9]||(t[9]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Add any notes about the song, such as key changes or special instructions ",-1))]),e("div",null,[r(s(b),{modelValue:s(o).url,"onUpdate:modelValue":t[6]||(t[6]=n=>s(o).url=n),type:"url",label:"External Link (Optional)",error:s(o).errors.url,placeholder:"https://"},null,8,["modelValue","error"]),t[10]||(t[10]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Link to an external resource (YouTube, Spotify, etc.) ",-1))]),(d=i.song.files)!=null&&d.length?(m(),u("div",Z,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-neutral-900"},"Existing Files",-1)),e("div",ee,[(m(!0),u(h,null,C(i.song.files,n=>(m(),u("div",{key:n.id,class:"flex items-center gap-4 border rounded-md p-3"},[e("div",te,[e("span",se,_(n.type),1),e("p",oe,_(n.original_filename),1)]),e("div",le,[r(s(S),{href:l.route("songs.files.download",[i.band.id,i.song.id,n.id]),class:"text-primary-600 hover:text-primary-700"},{default:c(()=>t[11]||(t[11]=[w(" Download ")])),_:2},1032,["href"]),e("button",{type:"button",onClick:f=>U(n),class:"text-neutral-400 hover:text-neutral-500"},t[12]||(t[12]=[e("span",{class:"sr-only"},"Delete",-1),e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ne)])]))),128))])])):A("",!0),e("div",re,[e("div",ae,[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-neutral-900"},"Add New Files",-1)),r(s(k),{type:"button",variant:"secondary",onClick:M,disabled:p.value.length>=10},{default:c(()=>t[14]||(t[14]=[w(" Add File ")])),_:1},8,["disabled"])]),e("div",ie,[(m(!0),u(h,null,C(p.value,(n,f)=>(m(),u("div",{key:f,class:"flex items-center gap-4 border rounded-md p-3"},[e("div",de,[V(e("select",{"onUpdate:modelValue":v=>n.type=v,class:"block w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},t[16]||(t[16]=[e("option",{value:""},"Select Type",-1),e("option",{value:"lyrics"},"Lyrics",-1),e("option",{value:"notes"},"Notes",-1),e("option",{value:"chords"},"Chords",-1),e("option",{value:"tabs"},"Tabs",-1),e("option",{value:"sheet_music"},"Sheet Music",-1),e("option",{value:"other"},"Other",-1)]),8,ue),[[q,n.type]])]),e("div",me,[e("input",{type:"file",onChange:v=>T(v,f),accept:".pdf,.txt",class:"block w-full text-sm"},null,40,pe)]),e("button",{type:"button",onClick:v=>$(f),class:"text-neutral-400 hover:text-neutral-500"},t[17]||(t[17]=[e("span",{class:"sr-only"},"Remove",-1),e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ce)]))),128))]),t[18]||(t[18]=e("p",{class:"text-sm text-neutral-500"},"PDF or TXT files up to 10MB",-1))]),e("div",fe,[r(s(S),{href:l.route("songs.show",[i.band.id,i.song.id])},{default:c(()=>[r(s(k),{type:"button",variant:"outline"},{default:c(()=>t[19]||(t[19]=[w(" Cancel ")])),_:1})]),_:1},8,["href"]),r(s(k),{type:"submit",variant:"primary",disabled:s(o).processing},{default:c(()=>[s(o).processing?(m(),u("span",ve,"Saving...")):(m(),u("span",be,"Save Changes"))]),_:1},8,["disabled"])])],32)])])])])]}),_:1}),r(s(W),{ref_key:"deleteModal",ref:g,title:"Delete File",message:"Are you sure you want to delete this file? This action cannot be undone.",type:"error","confirm-text":"Delete","show-cancel":!0,onConfirm:j},null,512)],64))}};export{De as default};
