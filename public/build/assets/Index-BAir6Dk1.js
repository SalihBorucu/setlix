import{C as U,e as g,o as r,w as a,b as e,d as F,a as u,u as s,c as d,h as w,F as C,j as S,i as z,z as D,t as p,f as b,r as h,x as B,k as E,l as L,n as j,A as W,m as O,P as G,W as V}from"./app-Dc_Fn3fE.js";import{_ as J}from"./AuthenticatedLayout-tG6DgGV4.js";import{_}from"./DSTooltip.vue_vue_type_style_index_0_lang-B9_KI25U.js";import{_ as R}from"./Card-D-rXPIZf.js";import{_ as q}from"./AlertModal-BwEH6MaV.js";import{_ as K}from"./DSTooltip-B2bV6-Uj.js";import{_ as Q}from"./Input-yf_LBPr5.js";import{_ as X}from"./Modal-XcdwLtnc.js";/* empty css            */import"./Alert-Bnj6zwPT.js";import"./Modal-ed41U4j-.js";import"./transition-Bm63RUDT.js";const Y={class:"mt-1 space-y-2"},Z=["id","onUpdate:modelValue","value"],ee=["for"],te={key:0,class:"mt-2 text-sm text-error-600"},se={class:"mt-6 flex justify-end space-x-3"},ne={key:0},re={key:1},oe={__name:"AddMemberModal",props:{show:{type:Boolean,required:!0},bandId:{type:Number,required:!0}},emits:["close"],setup(n,{emit:c}){const f=n,v=c,l=U({email:"",role:"member"}),x=[{id:"member",name:"Member"},{id:"admin",name:"Admin"}],k=()=>{l.post(route("bands.members.invite",f.bandId),{preserveScroll:!0,onSuccess:()=>{v("close"),l.reset()}})};return(M,o)=>(r(),g(s(X),{show:n.show,onClose:o[2]||(o[2]=m=>v("close"))},{default:a(()=>[o[5]||(o[5]=e("div",{class:"sm:flex sm:items-start"},[e("div",{class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])]),e("div",{class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"}," Add Band Member "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-neutral-500"}," Send an invitation to join your band. They'll receive an email with instructions to accept. ")])])],-1)),e("form",{onSubmit:F(k,["prevent"]),class:"mt-6 space-y-4"},[u(s(Q),{modelValue:s(l).email,"onUpdate:modelValue":o[0]||(o[0]=m=>s(l).email=m),type:"email",label:"Email Address",error:s(l).errors.email,required:""},null,8,["modelValue","error"]),e("div",null,[o[3]||(o[3]=e("label",{class:"block text-sm font-medium text-neutral-700 text-left"}," Role ",-1)),e("div",Y,[(r(),d(C,null,S(x,m=>e("div",{key:m.id,class:"flex items-center"},[z(e("input",{type:"radio",id:m.id,"onUpdate:modelValue":$=>s(l).role=$,value:m.id,class:"h-4 w-4 border-neutral-300 text-primary-600 focus:ring-primary-500"},null,8,Z),[[D,s(l).role]]),e("label",{for:m.id,class:"ml-3 block text-sm font-medium text-neutral-700"},p(m.name),9,ee)])),64))]),s(l).errors.role?(r(),d("p",te,p(s(l).errors.role),1)):w("",!0)]),e("div",se,[u(s(_),{type:"button",variant:"outline",onClick:o[1]||(o[1]=m=>v("close"))},{default:a(()=>o[4]||(o[4]=[b(" Cancel ")])),_:1}),u(s(_),{type:"submit",variant:"primary",disabled:s(l).processing},{default:a(()=>[s(l).processing?(r(),d("span",ne,"Sending invitation...")):(r(),d("span",re,"Send Invitation"))]),_:1},8,["disabled"])])],32)]),_:1},8,["show"]))}},ie=n=>{navigator.clipboard.writeText(n)};function le(n,c){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}const ae={class:"relative"},de={__name:"CopyTextButton",props:{text:{required:!0,type:String},textType:String,position:{type:String,default:"top"}},setup(n){const c=n,f=h(!1),v=()=>{f.value=!0,ie(c.text),setTimeout(()=>f.value=!1,600)},l=B(()=>{if(c.position==="top")return"-left-2.5";if(c.position==="left")return"-left-11 top-5";if(c.position==="right")return"right-2 top-0.5"});return(x,k)=>(r(),d("div",ae,[z(e("span",{class:j(["absolute z-50 text-xs text-primary-600 animate-float-up",l.value])}," Copied ",2),[[L,f.value]]),E(x.$slots,"default",{copyText:v},()=>[u(s(le),{name:"duplicate",class:"mr-2 h-5 w-5 cursor-pointer text-primary-600 hover:text-primary-800",onClick:v})])]))}},me={class:"md:flex md:items-center md:justify-between"},ue={class:"min-w-0 flex-1"},ce={class:"flex items-center"},pe={class:"mt-1 text-sm text-neutral-500"},ve={class:"mt-4 flex md:ml-4 md:mt-0"},fe={class:"space-y-6"},xe={role:"list",class:"divide-y divide-neutral-200"},ye={class:"flex items-center justify-between"},be={class:"flex items-center min-w-0"},he=["src","alt"],_e={class:"ml-4 min-w-0"},ke={class:"text-sm font-medium text-neutral-900 truncate"},ge={class:"text-sm text-neutral-500 truncate"},we={key:0,class:"ml-4"},Ce={key:0,class:"px-4 py-8 text-center text-sm text-neutral-500"},Me={key:1,role:"list",class:"divide-y divide-neutral-200"},$e={class:"flex items-center justify-between"},Ae={class:"flex items-center min-w-0"},Ie={class:"min-w-0"},Se={class:"text-sm font-medium text-neutral-900 truncate"},Be={class:"text-sm text-neutral-500 truncate"},je=["onClick"],Te={class:"ml-4"},We={__name:"Index",props:{band:{type:Object,required:!0},members:{type:Array,required:!0},pendingInvitations:{type:Array,required:!0},isAdmin:{type:Boolean,required:!0}},setup(n){const c=n,f=W(),v=B(()=>f.props.trial||{}),l=B(()=>{var t;return(t=v.value)!=null&&t.isSubscribed?!0:c.members.length+c.pendingInvitations.length<3}),x=h(!1),k=h(null),M=h(null),o=h(null),m=h(null),$=y=>{o.value=y,k.value.open()},H=()=>{o.value&&V.delete(route("bands.members.remove",[c.band.id,o.value.id]),{preserveScroll:!0,onSuccess:()=>{o.value=null}})},N=y=>{m.value=y,M.value.open()},P=()=>{m.value&&V.delete(route("bands.members.cancel-invitation",[c.band.id,m.value.id]),{preserveScroll:!0,onSuccess:()=>{m.value=null}})};return(y,t)=>(r(),d(C,null,[u(s(O),{title:`Members - ${n.band.name}`},null,8,["title"]),u(J,null,{header:a(()=>[e("div",me,[e("div",ue,[e("div",ce,[u(s(G),{href:y.route("bands.show",n.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:a(()=>[b(p(n.band.name),1)]),_:1},8,["href"]),t[2]||(t[2]=e("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),t[3]||(t[3]=e("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Band Members ",-1)),e("p",pe,p(n.members.length)+" members ",1)]),e("div",ve,[n.isAdmin?(r(),d(C,{key:0},[l.value?(r(),g(s(_),{key:1,variant:"primary",onClick:t[0]||(t[0]=A=>x.value=!0)},{default:a(()=>t[6]||(t[6]=[e("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),b(" Add Member ")])),_:1})):(r(),g(s(K),{key:0},{content:a(()=>t[5]||(t[5]=[b(" Free trial allows maximum 3 members. Please subscribe to add more. ")])),default:a(()=>[u(s(_),{variant:"primary",disabled:""},{default:a(()=>t[4]||(t[4]=[e("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),b(" Add Member ")])),_:1})]),_:1}))],64)):w("",!0)])])]),default:a(()=>{var A,T;return[e("div",fe,[u(s(R),null,{default:a(()=>[t[8]||(t[8]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Current Members")],-1)),e("ul",xe,[(r(!0),d(C,null,S(n.members,i=>(r(),d("li",{key:i.id,class:"px-4 py-5 sm:px-6"},[e("div",ye,[e("div",be,[e("img",{src:i.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(i.name)}`,alt:i.name,class:"h-10 w-10 rounded-full"},null,8,he),e("div",_e,[e("p",ke,p(i.name),1),e("p",ge,p(i.email),1)]),e("span",{class:j([i.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},p(i.role==="admin"?"Admin":"Member"),3)]),n.isAdmin&&i.id!==y.$page.props.auth.user.id?(r(),d("div",we,[u(s(_),{variant:"danger",size:"sm",onClick:I=>$(i)},{default:a(()=>t[7]||(t[7]=[b(" Remove ")])),_:2},1032,["onClick"])])):w("",!0)])]))),128))])]),_:1}),n.isAdmin?(r(),g(s(R),{key:0},{default:a(()=>[t[10]||(t[10]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Pending Invitations")],-1)),n.pendingInvitations.length===0?(r(),d("div",Ce," No pending invitations ")):(r(),d("ul",Me,[(r(!0),d(C,null,S(n.pendingInvitations,i=>(r(),d("li",{key:i.id,class:"px-4 py-5 sm:px-6"},[e("div",$e,[e("div",Ae,[e("div",Ie,[e("p",Se,p(i.email),1),e("p",Be,"Invited "+p(i.created_at),1),u(de,{class:"my-2",text:i.url,position:"right"},{default:a(({copyText:I})=>[e("p",{class:"text-sm text-primary-500 truncate hover:text-primary-600 cursor-pointer",onClick:I}," Copy Link ",8,je)]),_:2},1032,["text"])]),e("span",{class:j([i.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},p(i.role==="admin"?"Admin":"Member"),3)]),e("div",Te,[u(s(_),{variant:"danger",size:"sm",onClick:I=>N(i)},{default:a(()=>t[9]||(t[9]=[b(" Cancel ")])),_:2},1032,["onClick"])])])]))),128))]))]),_:1})):w("",!0)]),l.value?(r(),g(oe,{key:0,show:x.value,"band-id":n.band.id,onClose:t[1]||(t[1]=i=>x.value=!1)},null,8,["show","band-id"])):w("",!0),u(s(q),{ref_key:"deleteModal",ref:k,title:`Remove ${((A=o.value)==null?void 0:A.name)||"Member"}`,message:`Are you sure you want to remove ${((T=o.value)==null?void 0:T.name)||"this member"} from the band?`,type:"error","confirm-text":"Remove","show-cancel":!0,onConfirm:H},null,8,["title","message"]),u(s(q),{ref_key:"cancelInvitationModal",ref:M,title:"Cancel Invitation",message:"Are you sure you want to cancel this invitation?",type:"error","confirm-text":"Cancel Invitation","show-cancel":!0,onConfirm:P},null,512)]}),_:1})],64))}};export{We as default};
