import{C as z,e as I,o,w as m,b as e,d as H,a,u as t,c as d,h as k,F as g,j as S,i as q,s as N,t as p,f as _,r as b,l as P,k as U,x as D,y as E,m as F,n as j,P as L,W as T}from"./app-BtrowqLj.js";import{_ as W}from"./AuthenticatedLayout-vWT_1958.js";import{_ as w}from"./Button-DL3DoYTX.js";import{_ as V}from"./Card-C-r3P1u_.js";import{_ as R}from"./AlertModal-BGVNC2e3.js";import{_ as O}from"./Input-R5RcEK8J.js";import{_ as G}from"./Modal-6lxfsU3f.js";import"./Modal-q1Gywoev.js";import"./transition-BtpN7sGm.js";const J={class:"mt-1 space-y-2"},K=["id","onUpdate:modelValue","value"],Q=["for"],X={key:0,class:"mt-2 text-sm text-error-600"},Y={class:"mt-6 flex justify-end space-x-3"},Z={key:0},ee={key:1},te={__name:"AddMemberModal",props:{show:{type:Boolean,required:!0},bandId:{type:Number,required:!0}},emits:["close"],setup(s,{emit:v}){const x=s,f=v,l=z({email:"",role:"member"}),u=[{id:"member",name:"Member"},{id:"admin",name:"Admin"}],y=()=>{l.post(route("bands.members.invite",x.bandId),{preserveScroll:!0,onSuccess:()=>{f("close"),l.reset()}})};return(A,i)=>(o(),I(t(G),{show:s.show,onClose:i[2]||(i[2]=c=>f("close"))},{default:m(()=>[i[5]||(i[5]=e("div",{class:"sm:flex sm:items-start"},[e("div",{class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])]),e("div",{class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"}," Add Band Member "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-neutral-500"}," Send an invitation to join your band. They'll receive an email with instructions to accept. ")])])],-1)),e("form",{onSubmit:H(y,["prevent"]),class:"mt-6 space-y-4"},[a(t(O),{modelValue:t(l).email,"onUpdate:modelValue":i[0]||(i[0]=c=>t(l).email=c),type:"email",label:"Email Address",error:t(l).errors.email,required:""},null,8,["modelValue","error"]),e("div",null,[i[3]||(i[3]=e("label",{class:"block text-sm font-medium text-neutral-700 text-left"}," Role ",-1)),e("div",J,[(o(),d(g,null,S(u,c=>e("div",{key:c.id,class:"flex items-center"},[q(e("input",{type:"radio",id:c.id,"onUpdate:modelValue":C=>t(l).role=C,value:c.id,class:"h-4 w-4 border-neutral-300 text-primary-600 focus:ring-primary-500"},null,8,K),[[N,t(l).role]]),e("label",{for:c.id,class:"ml-3 block text-sm font-medium text-neutral-700"},p(c.name),9,Q)])),64))]),t(l).errors.role?(o(),d("p",X,p(t(l).errors.role),1)):k("",!0)]),e("div",Y,[a(t(w),{type:"button",variant:"outline",onClick:i[1]||(i[1]=c=>f("close"))},{default:m(()=>i[4]||(i[4]=[_(" Cancel ")])),_:1}),a(t(w),{type:"submit",variant:"primary",disabled:t(l).processing},{default:m(()=>[t(l).processing?(o(),d("span",Z,"Sending invitation...")):(o(),d("span",ee,"Send Invitation"))]),_:1},8,["disabled"])])],32)]),_:1},8,["show"]))}},se=s=>{navigator.clipboard.writeText(s)};function ne(s,v){return o(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}const re={class:"relative"},oe={__name:"CopyTextButton",props:{text:{required:!0,type:String},textType:String,position:{type:String,default:"top"}},setup(s){const v=s,x=b(!1),f=()=>{x.value=!0,se(v.text),setTimeout(()=>x.value=!1,600)},l=P(()=>{if(v.position==="top")return"-left-2.5";if(v.position==="left")return"-left-11 top-5"});return(u,y)=>(o(),d("div",re,[q(e("span",E(u.$attrs.class,{class:["absolute -top-2 z-50 text-xs text-primary-600 animate-float-up",l.value]})," Copied ",16),[[D,x.value]]),U(u.$slots,"default",{copyText:f},()=>[a(t(ne),{name:"duplicate",class:"mr-2 h-5 w-5 cursor-pointer text-primary-600 hover:text-primary-800",onClick:f})])]))}},le={class:"md:flex md:items-center md:justify-between"},ie={class:"min-w-0 flex-1"},ae={class:"flex items-center"},de={class:"mt-1 text-sm text-neutral-500"},me={class:"mt-4 flex md:ml-4 md:mt-0"},ue={class:"space-y-6"},ce={role:"list",class:"divide-y divide-neutral-200"},pe={class:"flex items-center justify-between"},ve={class:"flex items-center min-w-0"},xe=["src","alt"],fe={class:"ml-4 min-w-0"},ye={class:"text-sm font-medium text-neutral-900 truncate"},he={class:"text-sm text-neutral-500 truncate"},be={key:0,class:"ml-4"},_e={key:0,class:"px-4 py-8 text-center text-sm text-neutral-500"},we={key:1,role:"list",class:"divide-y divide-neutral-200"},ke={class:"flex items-center justify-between"},ge={class:"flex items-center min-w-0"},Ce={class:"min-w-0"},$e={class:"text-sm font-medium text-neutral-900 truncate"},Me={class:"text-sm text-neutral-500 truncate"},Ie=["onClick"],Se={class:"ml-4"},Ne={__name:"Index",props:{band:{type:Object,required:!0},members:{type:Array,required:!0},pendingInvitations:{type:Array,required:!0},isAdmin:{type:Boolean,required:!0}},setup(s){const v=s,x=b(!1),f=b(null),l=b(null),u=b(null),y=b(null),A=h=>{u.value=h,f.value.open()},i=()=>{u.value&&T.delete(route("bands.members.remove",[v.band.id,u.value.id]),{preserveScroll:!0,onSuccess:()=>{u.value=null}})},c=h=>{y.value=h,l.value.open()},C=()=>{y.value&&T.delete(route("bands.members.cancel-invitation",[v.band.id,y.value.id]),{preserveScroll:!0,onSuccess:()=>{y.value=null}})};return(h,r)=>(o(),d(g,null,[a(t(F),{title:`Members - ${s.band.name}`},null,8,["title"]),a(W,null,{header:m(()=>[e("div",le,[e("div",ie,[e("div",ae,[a(t(L),{href:h.route("bands.show",s.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:m(()=>[_(p(s.band.name),1)]),_:1},8,["href"]),r[2]||(r[2]=e("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),r[3]||(r[3]=e("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Band Members ",-1)),e("p",de,p(s.members.length)+" members ",1)]),e("div",me,[s.isAdmin?(o(),I(t(w),{key:0,variant:"primary",onClick:r[0]||(r[0]=$=>x.value=!0)},{default:m(()=>r[4]||(r[4]=[e("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),_(" Add Member ")])),_:1})):k("",!0)])])]),default:m(()=>{var $,B;return[e("div",ue,[a(t(V),null,{default:m(()=>[r[6]||(r[6]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Current Members")],-1)),e("ul",ce,[(o(!0),d(g,null,S(s.members,n=>(o(),d("li",{key:n.id,class:"px-4 py-5 sm:px-6"},[e("div",pe,[e("div",ve,[e("img",{src:n.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.name)}`,alt:n.name,class:"h-10 w-10 rounded-full"},null,8,xe),e("div",fe,[e("p",ye,p(n.name),1),e("p",he,p(n.email),1)]),e("span",{class:j([n.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},p(n.role==="admin"?"Admin":"Member"),3)]),s.isAdmin&&n.id!==h.$page.props.auth.user.id?(o(),d("div",be,[a(t(w),{variant:"danger",size:"sm",onClick:M=>A(n)},{default:m(()=>r[5]||(r[5]=[_(" Remove ")])),_:2},1032,["onClick"])])):k("",!0)])]))),128))])]),_:1}),s.isAdmin?(o(),I(t(V),{key:0},{default:m(()=>[r[8]||(r[8]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Pending Invitations")],-1)),s.pendingInvitations.length===0?(o(),d("div",_e," No pending invitations ")):(o(),d("ul",we,[(o(!0),d(g,null,S(s.pendingInvitations,n=>(o(),d("li",{key:n.id,class:"px-4 py-5 sm:px-6"},[e("div",ke,[e("div",ge,[e("div",Ce,[e("p",$e,p(n.email),1),e("p",Me,"Invited "+p(n.created_at),1),a(oe,{class:"my-2",text:n.url},{default:m(({copyText:M})=>[e("p",{class:"text-sm text-primary-500 truncate hover:text-primary-600 cursor-pointer",onClick:M}," Copy Link ",8,Ie)]),_:2},1032,["text"])]),e("span",{class:j([n.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},p(n.role==="admin"?"Admin":"Member"),3)]),e("div",Se,[a(t(w),{variant:"danger",size:"sm",onClick:M=>c(n)},{default:m(()=>r[7]||(r[7]=[_(" Cancel ")])),_:2},1032,["onClick"])])])]))),128))]))]),_:1})):k("",!0)]),a(te,{show:x.value,"band-id":s.band.id,onClose:r[1]||(r[1]=n=>x.value=!1)},null,8,["show","band-id"]),a(t(R),{ref_key:"deleteModal",ref:f,title:`Remove ${(($=u.value)==null?void 0:$.name)||"Member"}`,message:`Are you sure you want to remove ${((B=u.value)==null?void 0:B.name)||"this member"} from the band?`,type:"error","confirm-text":"Remove","show-cancel":!0,onConfirm:i},null,8,["title","message"]),a(t(R),{ref_key:"cancelInvitationModal",ref:l,title:"Cancel Invitation",message:"Are you sure you want to cancel this invitation?",type:"error","confirm-text":"Cancel Invitation","show-cancel":!0,onConfirm:C},null,512)]}),_:1})],64))}};export{Ne as default};
