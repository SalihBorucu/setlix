import{C as T,r as L,x as k,A as $,c as d,o as i,a as r,u as s,m as D,w as a,b as e,d as P,e as g,h as q,F as w,j as _,t as C,i as h,n as G,s as z,f as m,ab as S,P as v}from"./app-DNDvkvxh.js";import{_ as E}from"./AuthenticatedLayout-lgNrrhGL.js";import{_ as c}from"./DSTooltip.vue_vue_type_style_index_0_lang-tyLMgYsG.js";import{_ as b}from"./Input-kPNMSBDW.js";import{_ as M}from"./Card-BWugoTUb.js";import{_ as H}from"./Alert-D2c6zyUd.js";import{_ as I}from"./DSDurationInput-PY-miDAO.js";import{_ as R}from"./DSTooltip-BcAQPmZC.js";/* empty css            */const X={class:"md:flex md:items-center md:justify-between max-w-2xl"},K={class:"min-w-0 flex-1"},Y={class:"flex items-center"},J={class:"flex flex-col sm:flex-row sm:justify-between"},Q={class:"py-2"},W={class:"flex justify-end space-x-3"},Z={key:0},ee={key:1},te={class:"list-disc list-inside"},se={class:"grid grid-cols-2 gap-4"},oe={class:"mt-1"},le={class:"space-y-4"},re={class:"flex justify-between items-center"},ne={class:"space-y-2"},ae={class:"flex-1"},ie=["onUpdate:modelValue"],de={class:"flex-1"},ue=["onUpdate:modelValue"],me={class:"flex-1"},pe=["onChange"],fe=["onClick"],ce={class:"flex items-center justify-end space-x-4"},be={key:0},ve={key:1},Se={__name:"Create",props:{band:{type:Object,required:!0}},setup(p){const y=p,o=T({band_id:y.band.id,name:null,duration:null,duration_seconds:null,notes:null,url:null,bpm:null,artist:null,files:[],spotify_link:null}),u=L([]),U=()=>{u.value.length<10&&u.value.push({type:"",file:null})},j=n=>{u.value.splice(n,1)},B=(n,t)=>{const l=n.target.files[0];l&&(u.value[t].file=l)},V=()=>{o.files=u.value.filter(n=>n.file&&n.type).map(n=>({type:n.type,instrument:n.instrument,file:n.file})),o.post(route("songs.store",y.band.id))},A=k(()=>!!o.name||!!o.duration||!!o.notes||!!o.url||!!o.artist||!!o.bpm),F=$(),N=k(()=>F.props.trial||{}),O=k(()=>{var n,t;return(n=N.value)!=null&&n.isSubscribed?!0:((t=y.songs)==null?void 0:t.length)<10});return(n,t)=>(i(),d(w,null,[r(s(D),{title:"Add New Song"}),r(E,{class:"space-y-2"},{header:a(()=>[e("div",X,[e("div",K,[e("div",Y,[r(s(v),{href:n.route("bands.show",p.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:a(()=>[m(C(p.band.name),1)]),_:1},8,["href"]),t[9]||(t[9]=e("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),r(s(v),{href:n.route("songs.index",p.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:a(()=>t[8]||(t[8]=[m(" Songs ")])),_:1},8,["href"])]),e("div",J,[t[13]||(t[13]=e("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Add New Song ",-1)),e("div",Q,[O.value?(i(),g(s(v),{key:1,href:n.route("songs.bulk-create",p.band.id)},{default:a(()=>[r(s(c),{variant:"secondary",class:"w-full sm:w-auto"},{default:a(()=>t[12]||(t[12]=[e("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),m(" Add Multiple Songs ")])),_:1})]),_:1},8,["href"])):(i(),g(s(R),{key:0},{content:a(()=>t[11]||(t[11]=[m(" Free trial allows maximum 10 songs. Please subscribe to add more. ")])),default:a(()=>[r(s(c),{variant:"secondary",class:"w-full sm:w-auto",disabled:""},{default:a(()=>t[10]||(t[10]=[e("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),m(" Add Multiple Songs ")])),_:1})]),_:1}))])]),t[14]||(t[14]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Add a new song to your band's library ",-1))])])]),default:a(()=>[r(s(M),{class:"max-w-2xl space-y-6 p-6 mb-4",disabled:A.value},{default:a(()=>[t[15]||(t[15]=e("p",{class:"text-sm text-gray-600"},"Enter a Spotify track URL to import its details.",-1)),r(s(b),{modelValue:s(o).spotify_link,"onUpdate:modelValue":t[0]||(t[0]=l=>s(o).spotify_link=l),type:"url",placeholder:"https://open.spotify.com/track/abc123",label:"Spotify Link",error:s(o).errors.spotify_link,required:""},null,8,["modelValue","error"]),e("div",W,[r(s(c),{onClick:V,variant:"primary",disabled:s(o).processing},{default:a(()=>[s(o).processing?(i(),d("span",Z,"Importing...")):(i(),d("span",ee,"Import Song"))]),_:1},8,["disabled"])])]),_:1},8,["disabled"]),r(s(M),{class:"max-w-2xl",disabled:!!s(o).spotify_link},{default:a(()=>[e("form",{onSubmit:P(V,["prevent"]),class:"space-y-6 p-6"},[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"Or manually add a song's for your list.",-1)),Object.keys(s(o).errors).length>0?(i(),g(s(H),{key:0,type:"error"},{default:a(()=>[e("ul",te,[(i(!0),d(w,null,_(s(o).errors,l=>(i(),d("li",{key:l},C(l),1))),128))])]),_:1})):q("",!0),e("div",se,[e("div",null,[r(s(b),{modelValue:s(o).name,"onUpdate:modelValue":t[1]||(t[1]=l=>s(o).name=l),type:"text",label:"Song Name",error:s(o).errors.name,required:""},null,8,["modelValue","error"])]),e("div",null,[r(s(b),{modelValue:s(o).artist,"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).artist=l),type:"text",label:"Artist (Optional)",error:s(o).errors.artist,placeholder:""},null,8,["modelValue","error"])]),e("div",null,[r(s(I),{modelValue:s(o).duration,"onUpdate:modelValue":t[3]||(t[3]=l=>s(o).duration=l),"onUpdate:seconds":t[4]||(t[4]=l=>s(o).duration_seconds=l),label:"Duration",error:s(o).errors.duration_seconds,required:""},null,8,["modelValue","error"])]),e("div",null,[r(s(b),{modelValue:s(o).bpm,"onUpdate:modelValue":t[5]||(t[5]=l=>s(o).bpm=l),type:"number",label:"BPM (Optional)",error:s(o).errors.bpm},null,8,["modelValue","error"])])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-neutral-700"}," Notes (Optional) ",-1)),e("div",oe,[h(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=l=>s(o).notes=l),rows:"4",class:G(["block w-full rounded-lg shadow-sm transition-colors duration-200","border-neutral-300 focus:border-primary-500 focus:ring-primary-500",{"border-error-500 focus:border-error-500 focus:ring-error-500":s(o).errors.notes}])},null,2),[[z,s(o).notes]])]),t[17]||(t[17]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Add any notes about the song, such as key changes or special instructions ",-1))]),e("div",null,[r(s(b),{modelValue:s(o).url,"onUpdate:modelValue":t[7]||(t[7]=l=>s(o).url=l),type:"url",label:"External Link (Optional)",error:s(o).errors.url,placeholder:"https://"},null,8,["modelValue","error"]),t[18]||(t[18]=e("p",{class:"mt-1 text-sm text-neutral-500"}," Link to an external resource (YouTube, Spotify, etc.) ",-1))]),e("div",le,[e("div",re,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-neutral-900"},"Files",-1)),r(s(c),{type:"button",variant:"secondary",onClick:U,disabled:u.value.length>=10},{default:a(()=>t[19]||(t[19]=[m(" Add File ")])),_:1},8,["disabled"])]),e("div",ne,[(i(!0),d(w,null,_(u.value,(l,x)=>(i(),d("div",{key:x,class:"flex items-center gap-4 border rounded-md p-3"},[e("div",ae,[h(e("select",{"onUpdate:modelValue":f=>l.type=f,class:"block w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},t[21]||(t[21]=[e("option",{value:""},"Select Type",-1),e("option",{value:"lyrics"},"Lyrics",-1),e("option",{value:"notes"},"Notes",-1),e("option",{value:"chords"},"Chords",-1),e("option",{value:"tabs"},"Tabs",-1),e("option",{value:"sheet_music"},"Sheet Music",-1),e("option",{value:"other"},"Other",-1)]),8,ie),[[S,l.type]])]),e("div",de,[h(e("select",{"onUpdate:modelValue":f=>l.instrument=f,class:"block w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},t[22]||(t[22]=[e("option",{value:""},"Select Instrument",-1),e("option",{value:"vocals"},"Vocals",-1),e("option",{value:"guitar"},"Guitar",-1),e("option",{value:"saxophone"},"Saxophone",-1),e("option",{value:"trumpet"},"Trumpet",-1),e("option",{value:"trombone"},"Trombone",-1),e("option",{value:"flute"},"Flute",-1),e("option",{value:"keyboard"},"Keyboard",-1),e("option",{value:"drums"},"Drums",-1),e("option",{value:"bass"},"Bass",-1),e("option",{value:"violin"},"Violin",-1),e("option",{value:"cello"},"Cello",-1),e("option",{value:"percussion"},"Percussion",-1),e("option",{value:"other"},"Other",-1)]),8,ue),[[S,l.instrument]])]),e("div",me,[e("input",{type:"file",onChange:f=>B(f,x),accept:".pdf,.txt,.musicxml",class:"block w-full text-sm"},null,40,pe)]),e("button",{type:"button",onClick:f=>j(x),class:"text-neutral-400 hover:text-neutral-500"},t[23]||(t[23]=[e("span",{class:"sr-only"},"Remove",-1),e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,fe)]))),128))]),t[24]||(t[24]=e("p",{class:"text-sm text-neutral-500"},"PDF or TXT or MusicXML files up to 10MB",-1))]),e("div",ce,[r(s(v),{href:n.route("songs.index",p.band.id)},{default:a(()=>[r(s(c),{type:"button",variant:"outline"},{default:a(()=>t[25]||(t[25]=[m(" Cancel ")])),_:1})]),_:1},8,["href"]),r(s(c),{type:"submit",variant:"primary",disabled:s(o).processing},{default:a(()=>[s(o).processing?(i(),d("span",be,"Creating...")):(i(),d("span",ve,"Create Song"))]),_:1},8,["disabled"])])],32)]),_:1},8,["disabled"])]),_:1})],64))}};export{Se as default};
