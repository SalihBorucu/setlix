import{C as z,e as I,o as i,w as m,b as e,d as H,a,u as t,c as d,h as w,F as k,j as S,i as q,s as N,t as v,f as _,r as b,l as U,k as P,x as D,n as A,m as E,P as F,W as T}from"./app-Dln6nl-b.js";import{_ as L}from"./AuthenticatedLayout-CWXLAdDq.js";import{_ as g}from"./Button-CAysM2Ph.js";import{_ as V}from"./Card-y-0CypjW.js";import{_ as R}from"./AlertModal-OONi60-M.js";import{_ as W}from"./Input-D6aLKpfQ.js";import{_ as O}from"./Modal-BzkxgCLX.js";import"./Modal-DA95oBKb.js";import"./transition-DxIAKzC1.js";const G={class:"mt-1 space-y-2"},J=["id","onUpdate:modelValue","value"],K=["for"],Q={key:0,class:"mt-2 text-sm text-error-600"},X={class:"mt-6 flex justify-end space-x-3"},Y={key:0},Z={key:1},ee={__name:"AddMemberModal",props:{show:{type:Boolean,required:!0},bandId:{type:Number,required:!0}},emits:["close"],setup(s,{emit:c}){const x=s,f=c,o=z({email:"",role:"member"}),p=[{id:"member",name:"Member"},{id:"admin",name:"Admin"}],y=()=>{o.post(route("bands.members.invite",x.bandId),{preserveScroll:!0,onSuccess:()=>{f("close"),o.reset()}})};return(B,l)=>(i(),I(t(O),{show:s.show,onClose:l[2]||(l[2]=u=>f("close"))},{default:m(()=>[l[5]||(l[5]=e("div",{class:"sm:flex sm:items-start"},[e("div",{class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])]),e("div",{class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"}," Add Band Member "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-neutral-500"}," Send an invitation to join your band. They'll receive an email with instructions to accept. ")])])],-1)),e("form",{onSubmit:H(y,["prevent"]),class:"mt-6 space-y-4"},[a(t(W),{modelValue:t(o).email,"onUpdate:modelValue":l[0]||(l[0]=u=>t(o).email=u),type:"email",label:"Email Address",error:t(o).errors.email,required:""},null,8,["modelValue","error"]),e("div",null,[l[3]||(l[3]=e("label",{class:"block text-sm font-medium text-neutral-700 text-left"}," Role ",-1)),e("div",G,[(i(),d(k,null,S(p,u=>e("div",{key:u.id,class:"flex items-center"},[q(e("input",{type:"radio",id:u.id,"onUpdate:modelValue":C=>t(o).role=C,value:u.id,class:"h-4 w-4 border-neutral-300 text-primary-600 focus:ring-primary-500"},null,8,J),[[N,t(o).role]]),e("label",{for:u.id,class:"ml-3 block text-sm font-medium text-neutral-700"},v(u.name),9,K)])),64))]),t(o).errors.role?(i(),d("p",Q,v(t(o).errors.role),1)):w("",!0)]),e("div",X,[a(t(g),{type:"button",variant:"outline",onClick:l[1]||(l[1]=u=>f("close"))},{default:m(()=>l[4]||(l[4]=[_(" Cancel ")])),_:1}),a(t(g),{type:"submit",variant:"primary",disabled:t(o).processing},{default:m(()=>[t(o).processing?(i(),d("span",Y,"Sending invitation...")):(i(),d("span",Z,"Send Invitation"))]),_:1},8,["disabled"])])],32)]),_:1},8,["show"]))}},te=s=>{navigator.clipboard.writeText(s)};function se(s,c){return i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}const ne={class:"relative"},re={__name:"CopyTextButton",props:{text:{required:!0,type:String},textType:String,position:{type:String,default:"top"}},setup(s){const c=s,x=b(!1),f=()=>{x.value=!0,te(c.text),setTimeout(()=>x.value=!1,600)},o=U(()=>{if(c.position==="top")return"-left-2.5";if(c.position==="left")return"-left-11 top-5";if(c.position==="right")return"right-2 top-0.5"});return(p,y)=>(i(),d("div",ne,[q(e("span",{class:A(["absolute z-50 text-xs text-primary-600 animate-float-up",o.value])}," Copied ",2),[[D,x.value]]),P(p.$slots,"default",{copyText:f},()=>[a(t(se),{name:"duplicate",class:"mr-2 h-5 w-5 cursor-pointer text-primary-600 hover:text-primary-800",onClick:f})])]))}},ie={class:"md:flex md:items-center md:justify-between"},oe={class:"min-w-0 flex-1"},le={class:"flex items-center"},ae={class:"mt-1 text-sm text-neutral-500"},de={class:"mt-4 flex md:ml-4 md:mt-0"},me={class:"space-y-6"},ue={role:"list",class:"divide-y divide-neutral-200"},ce={class:"flex items-center justify-between"},pe={class:"flex items-center min-w-0"},ve=["src","alt"],xe={class:"ml-4 min-w-0"},fe={class:"text-sm font-medium text-neutral-900 truncate"},ye={class:"text-sm text-neutral-500 truncate"},he={key:0,class:"ml-4"},be={key:0,class:"px-4 py-8 text-center text-sm text-neutral-500"},_e={key:1,role:"list",class:"divide-y divide-neutral-200"},ge={class:"flex items-center justify-between"},we={class:"flex items-center min-w-0"},ke={class:"min-w-0"},Ce={class:"text-sm font-medium text-neutral-900 truncate"},$e={class:"text-sm text-neutral-500 truncate"},Me=["onClick"],Ie={class:"ml-4"},He={__name:"Index",props:{band:{type:Object,required:!0},members:{type:Array,required:!0},pendingInvitations:{type:Array,required:!0},isAdmin:{type:Boolean,required:!0}},setup(s){const c=s,x=b(!1),f=b(null),o=b(null),p=b(null),y=b(null),B=h=>{p.value=h,f.value.open()},l=()=>{p.value&&T.delete(route("bands.members.remove",[c.band.id,p.value.id]),{preserveScroll:!0,onSuccess:()=>{p.value=null}})},u=h=>{y.value=h,o.value.open()},C=()=>{y.value&&T.delete(route("bands.members.cancel-invitation",[c.band.id,y.value.id]),{preserveScroll:!0,onSuccess:()=>{y.value=null}})};return(h,r)=>(i(),d(k,null,[a(t(E),{title:`Members - ${s.band.name}`},null,8,["title"]),a(L,null,{header:m(()=>[e("div",ie,[e("div",oe,[e("div",le,[a(t(F),{href:h.route("bands.show",s.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:m(()=>[_(v(s.band.name),1)]),_:1},8,["href"]),r[2]||(r[2]=e("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),r[3]||(r[3]=e("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Band Members ",-1)),e("p",ae,v(s.members.length)+" members ",1)]),e("div",de,[s.isAdmin?(i(),I(t(g),{key:0,variant:"primary",onClick:r[0]||(r[0]=$=>x.value=!0)},{default:m(()=>r[4]||(r[4]=[e("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),_(" Add Member ")])),_:1})):w("",!0)])])]),default:m(()=>{var $,j;return[e("div",me,[a(t(V),null,{default:m(()=>[r[6]||(r[6]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Current Members")],-1)),e("ul",ue,[(i(!0),d(k,null,S(s.members,n=>(i(),d("li",{key:n.id,class:"px-4 py-5 sm:px-6"},[e("div",ce,[e("div",pe,[e("img",{src:n.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.name)}`,alt:n.name,class:"h-10 w-10 rounded-full"},null,8,ve),e("div",xe,[e("p",fe,v(n.name),1),e("p",ye,v(n.email),1)]),e("span",{class:A([n.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},v(n.role==="admin"?"Admin":"Member"),3)]),s.isAdmin&&n.id!==h.$page.props.auth.user.id?(i(),d("div",he,[a(t(g),{variant:"danger",size:"sm",onClick:M=>B(n)},{default:m(()=>r[5]||(r[5]=[_(" Remove ")])),_:2},1032,["onClick"])])):w("",!0)])]))),128))])]),_:1}),s.isAdmin?(i(),I(t(V),{key:0},{default:m(()=>[r[8]||(r[8]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Pending Invitations")],-1)),s.pendingInvitations.length===0?(i(),d("div",be," No pending invitations ")):(i(),d("ul",_e,[(i(!0),d(k,null,S(s.pendingInvitations,n=>(i(),d("li",{key:n.id,class:"px-4 py-5 sm:px-6"},[e("div",ge,[e("div",we,[e("div",ke,[e("p",Ce,v(n.email),1),e("p",$e,"Invited "+v(n.created_at),1),a(re,{class:"my-2",text:n.url,position:"right"},{default:m(({copyText:M})=>[e("p",{class:"text-sm text-primary-500 truncate hover:text-primary-600 cursor-pointer",onClick:M}," Copy Link ",8,Me)]),_:2},1032,["text"])]),e("span",{class:A([n.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},v(n.role==="admin"?"Admin":"Member"),3)]),e("div",Ie,[a(t(g),{variant:"danger",size:"sm",onClick:M=>u(n)},{default:m(()=>r[7]||(r[7]=[_(" Cancel ")])),_:2},1032,["onClick"])])])]))),128))]))]),_:1})):w("",!0)]),a(ee,{show:x.value,"band-id":s.band.id,onClose:r[1]||(r[1]=n=>x.value=!1)},null,8,["show","band-id"]),a(t(R),{ref_key:"deleteModal",ref:f,title:`Remove ${(($=p.value)==null?void 0:$.name)||"Member"}`,message:`Are you sure you want to remove ${((j=p.value)==null?void 0:j.name)||"this member"} from the band?`,type:"error","confirm-text":"Remove","show-cancel":!0,onConfirm:l},null,8,["title","message"]),a(t(R),{ref_key:"cancelInvitationModal",ref:o,title:"Cancel Invitation",message:"Are you sure you want to cancel this invitation?",type:"error","confirm-text":"Cancel Invitation","show-cancel":!0,onConfirm:C},null,512)]}),_:1})],64))}};export{He as default};
