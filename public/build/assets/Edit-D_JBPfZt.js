import{C as _,r as V,c as p,o as b,a as n,u as o,m as S,w as g,b as t,d as $,i as k,q as C,h as D,t as v,P as N,f as U,F as q}from"./app-BtrowqLj.js";import{_ as M}from"./AuthenticatedLayout-vWT_1958.js";import{_ as i,a as f,b as m}from"./TextInput-C21kgATL.js";const O={class:"flex justify-between items-center"},j={class:"text-sm text-gray-600"},E={class:"py-12"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},F={class:"p-6"},P={key:0,class:"mt-2 text-sm text-gray-600"},T={class:"flex items-center justify-end gap-4"},L=["disabled"],G={__name:"Edit",props:{band:{type:Object,required:!0},song:{type:Object,required:!0}},setup(d){const r=d,s=_({band_id:r.band.id,name:r.song.name,duration_seconds:r.song.duration_seconds,notes:r.song.notes,url:r.song.url,document:null}),x=a=>{const e=Math.floor(a/60),u=a%60;return`${e}:${u.toString().padStart(2,"0")}`},y=a=>{const[e,u]=a.split(":").map(Number);return e*60+u},c=V(x(r.song.duration_seconds)),w=()=>{const a=c.value;/^\d+:\d{2}$/.test(a)&&(s.duration_seconds=y(a))},h=()=>{s.post(route("songs.update",[r.band.id,r.song.id]),{preserveScroll:!0,onSuccess:()=>{s.reset()}})};return(a,e)=>(b(),p(q,null,[n(o(S),{title:`Edit ${d.song.name} - ${d.band.name}`},null,8,["title"]),n(M,null,{header:g(()=>[t("div",O,[t("div",null,[e[5]||(e[5]=t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Edit Song ",-1)),t("p",j,v(d.band.name),1)])])]),default:g(()=>{var u;return[t("div",E,[t("div",B,[t("div",I,[t("div",F,[t("form",{onSubmit:$(h,["prevent"]),class:"space-y-6"},[t("div",null,[n(i,{for:"name",value:"Song Name"}),n(f,{id:"name",modelValue:o(s).name,"onUpdate:modelValue":e[0]||(e[0]=l=>o(s).name=l),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),n(m,{message:o(s).errors.name,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"duration",value:"Duration (MM:SS)"}),n(f,{id:"duration",modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=l=>c.value=l),type:"text",class:"mt-1 block w-full",placeholder:"3:30",pattern:"\\d+:\\d{2}",onInput:w,required:""},null,8,["modelValue"]),n(m,{message:o(s).errors.duration_seconds,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"notes",value:"Notes (Optional)"}),k(t("textarea",{id:"notes","onUpdate:modelValue":e[2]||(e[2]=l=>o(s).notes=l),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:"4"},null,512),[[C,o(s).notes]]),n(m,{message:o(s).errors.notes,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"url",value:"URL (Optional)"}),n(f,{id:"url",modelValue:o(s).url,"onUpdate:modelValue":e[3]||(e[3]=l=>o(s).url=l),type:"url",class:"mt-1 block w-full"},null,8,["modelValue"]),n(m,{message:o(s).errors.url,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"document",value:"Document (Optional)"}),t("input",{id:"document",type:"file",onInput:e[4]||(e[4]=l=>o(s).document=l.target.files[0]),class:"mt-1 block w-full",accept:".pdf,.txt"},null,32),d.song.document_path?(b(),p("p",P," Current document: "+v((u=d.song.document_type)==null?void 0:u.toUpperCase()),1)):D("",!0),n(m,{message:o(s).errors.document,class:"mt-2"},null,8,["message"])]),t("div",T,[n(o(N),{href:a.route("songs.show",[d.band.id,d.song.id]),class:"text-gray-600 hover:text-gray-900"},{default:g(()=>e[6]||(e[6]=[U(" Cancel ")])),_:1},8,["href"]),t("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition",disabled:o(s).processing}," Save Changes ",8,L)])],32)])])])])]}),_:1})],64))}};export{G as default};
