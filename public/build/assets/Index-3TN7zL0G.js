import{C as N,e as M,o as i,w as u,b as e,d as z,a as o,u as t,c as d,h as k,F as g,j as I,i as T,s as U,t as c,f as h,r as b,m as P,n as B,P as D,W as S}from"./app-CG_txIVR.js";import{_ as E}from"./AuthenticatedLayout-DJIiH2wS.js";import{_}from"./Button-Kx0rHSGw.js";import{_ as R}from"./Card-BOaGNwsG.js";import{_ as V}from"./AlertModal-3CMvPoyu.js";import{_ as F}from"./Input-DmtGEFtB.js";import{_ as H}from"./Modal-Fs77Z5mB.js";import"./Modal-MVY_GAV0.js";import"./transition-Kkr64J0r.js";const W={class:"mt-1 space-y-2"},L=["id","onUpdate:modelValue","value"],O=["for"],G={key:0,class:"mt-2 text-sm text-error-600"},J={class:"mt-6 flex justify-end space-x-3"},K={key:0},Q={key:1},X={__name:"AddMemberModal",props:{show:{type:Boolean,required:!0},bandId:{type:Number,required:!0}},emits:["close"],setup(l,{emit:w}){const y=l,f=w,r=N({email:"",role:"member"}),v=[{id:"member",name:"Member"},{id:"admin",name:"Admin"}],x=()=>{r.post(route("bands.members.invite",y.bandId),{preserveScroll:!0,onSuccess:()=>{f("close"),r.reset()}})};return(A,a)=>(i(),M(t(H),{show:l.show,onClose:a[2]||(a[2]=m=>f("close"))},{default:u(()=>[a[5]||(a[5]=e("div",{class:"sm:flex sm:items-start"},[e("div",{class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})])]),e("div",{class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"}," Add Band Member "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-neutral-500"}," Send an invitation to join your band. They'll receive an email with instructions to accept. ")])])],-1)),e("form",{onSubmit:z(x,["prevent"]),class:"mt-6 space-y-4"},[o(t(F),{modelValue:t(r).email,"onUpdate:modelValue":a[0]||(a[0]=m=>t(r).email=m),type:"email",label:"Email Address",error:t(r).errors.email,required:""},null,8,["modelValue","error"]),e("div",null,[a[3]||(a[3]=e("label",{class:"block text-sm font-medium text-neutral-700 text-left"}," Role ",-1)),e("div",W,[(i(),d(g,null,I(v,m=>e("div",{key:m.id,class:"flex items-center"},[T(e("input",{type:"radio",id:m.id,"onUpdate:modelValue":C=>t(r).role=C,value:m.id,class:"h-4 w-4 border-neutral-300 text-primary-600 focus:ring-primary-500"},null,8,L),[[U,t(r).role]]),e("label",{for:m.id,class:"ml-3 block text-sm font-medium text-neutral-700"},c(m.name),9,O)])),64))]),t(r).errors.role?(i(),d("p",G,c(t(r).errors.role),1)):k("",!0)]),e("div",J,[o(t(_),{type:"button",variant:"outline",onClick:a[1]||(a[1]=m=>f("close"))},{default:u(()=>a[4]||(a[4]=[h(" Cancel ")])),_:1}),o(t(_),{type:"submit",variant:"primary",disabled:t(r).processing},{default:u(()=>[t(r).processing?(i(),d("span",K,"Sending invitation...")):(i(),d("span",Q,"Send Invitation"))]),_:1},8,["disabled"])])],32)]),_:1},8,["show"]))}},Y={class:"md:flex md:items-center md:justify-between"},Z={class:"min-w-0 flex-1"},ee={class:"flex items-center"},te={class:"mt-1 text-sm text-neutral-500"},se={class:"mt-4 flex md:ml-4 md:mt-0"},ne={class:"space-y-6"},le={role:"list",class:"divide-y divide-neutral-200"},ie={class:"flex items-center justify-between"},re={class:"flex items-center min-w-0"},ae=["src","alt"],oe={class:"ml-4 min-w-0"},de={class:"text-sm font-medium text-neutral-900 truncate"},me={class:"text-sm text-neutral-500 truncate"},ue={key:0,class:"ml-4"},ce={key:0,class:"px-4 py-8 text-center text-sm text-neutral-500"},ve={key:1,role:"list",class:"divide-y divide-neutral-200"},fe={class:"flex items-center justify-between"},xe={class:"flex items-center min-w-0"},pe={class:"min-w-0"},ye={class:"text-sm font-medium text-neutral-900 truncate"},be={class:"text-sm text-neutral-500 truncate"},he={class:"ml-4"},je={__name:"Index",props:{band:{type:Object,required:!0},members:{type:Array,required:!0},pendingInvitations:{type:Array,required:!0},isAdmin:{type:Boolean,required:!0}},setup(l){const w=l,y=b(!1),f=b(null),r=b(null),v=b(null),x=b(null),A=p=>{v.value=p,f.value.open()},a=()=>{v.value&&S.delete(route("bands.members.remove",[w.band.id,v.value.id]),{preserveScroll:!0,onSuccess:()=>{v.value=null}})},m=p=>{x.value=p,r.value.open()},C=()=>{x.value&&S.delete(route("bands.members.cancel-invitation",[w.band.id,x.value.id]),{preserveScroll:!0,onSuccess:()=>{x.value=null}})};return(p,s)=>(i(),d(g,null,[o(t(P),{title:`Members - ${l.band.name}`},null,8,["title"]),o(E,null,{header:u(()=>[e("div",Y,[e("div",Z,[e("div",ee,[o(t(D),{href:p.route("bands.show",l.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:u(()=>[h(c(l.band.name),1)]),_:1},8,["href"]),s[2]||(s[2]=e("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),s[3]||(s[3]=e("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Band Members ",-1)),e("p",te,c(l.members.length)+" members ",1)]),e("div",se,[l.isAdmin?(i(),M(t(_),{key:0,variant:"primary",onClick:s[0]||(s[0]=$=>y.value=!0)},{default:u(()=>s[4]||(s[4]=[e("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h(" Add Member ")])),_:1})):k("",!0)])])]),default:u(()=>{var $,j;return[e("div",ne,[o(t(R),null,{default:u(()=>[s[6]||(s[6]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Current Members")],-1)),e("ul",le,[(i(!0),d(g,null,I(l.members,n=>(i(),d("li",{key:n.id,class:"px-4 py-5 sm:px-6"},[e("div",ie,[e("div",re,[e("img",{src:n.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(n.name)}`,alt:n.name,class:"h-10 w-10 rounded-full"},null,8,ae),e("div",oe,[e("p",de,c(n.name),1),e("p",me,c(n.email),1)]),e("span",{class:B([n.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},c(n.role==="admin"?"Admin":"Member"),3)]),l.isAdmin&&n.id!==p.$page.props.auth.user.id?(i(),d("div",ue,[o(t(_),{variant:"danger",size:"sm",onClick:q=>A(n)},{default:u(()=>s[5]||(s[5]=[h(" Remove ")])),_:2},1032,["onClick"])])):k("",!0)])]))),128))])]),_:1}),l.isAdmin?(i(),M(t(R),{key:0},{default:u(()=>[s[8]||(s[8]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-neutral-200"},[e("h3",{class:"text-lg font-medium leading-6 text-neutral-900"},"Pending Invitations")],-1)),l.pendingInvitations.length===0?(i(),d("div",ce," No pending invitations ")):(i(),d("ul",ve,[(i(!0),d(g,null,I(l.pendingInvitations,n=>(i(),d("li",{key:n.id,class:"px-4 py-5 sm:px-6"},[e("div",fe,[e("div",xe,[e("div",pe,[e("p",ye,c(n.email),1),e("p",be,"Invited "+c(n.created_at),1)]),e("span",{class:B([n.role==="admin"?"bg-primary-100 text-primary-800":"bg-neutral-100 text-neutral-800","ml-4 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},c(n.role==="admin"?"Admin":"Member"),3)]),e("div",he,[o(t(_),{variant:"danger",size:"sm",onClick:q=>m(n)},{default:u(()=>s[7]||(s[7]=[h(" Cancel ")])),_:2},1032,["onClick"])])])]))),128))]))]),_:1})):k("",!0)]),o(X,{show:y.value,"band-id":l.band.id,onClose:s[1]||(s[1]=n=>y.value=!1)},null,8,["show","band-id"]),o(t(V),{ref_key:"deleteModal",ref:f,title:`Remove ${(($=v.value)==null?void 0:$.name)||"Member"}`,message:`Are you sure you want to remove ${((j=v.value)==null?void 0:j.name)||"this member"} from the band?`,type:"error","confirm-text":"Remove","show-cancel":!0,onConfirm:a},null,8,["title","message"]),o(t(V),{ref_key:"cancelInvitationModal",ref:r,title:"Cancel Invitation",message:"Are you sure you want to cancel this invitation?",type:"error","confirm-text":"Cancel Invitation","show-cancel":!0,onConfirm:C},null,512)]}),_:1})],64))}};export{je as default};
