import{C as O,r as $,x as g,A as L,c as d,o as i,a as r,u as s,m as T,w as a,b as t,d as D,e as k,h as P,F as w,j as _,t as V,i as C,n as q,s as z,f as m,a9 as E,P as b}from"./app--ZpzzJ7l.js";import{_ as G}from"./AuthenticatedLayout-OUWLQRSb.js";import{_ as f}from"./DSTooltip.vue_vue_type_style_index_0_lang-BOOVAo6K.js";import{_ as c}from"./Input-DLswUkOy.js";import{_ as S}from"./Card-vUG8GSk5.js";import{_ as H}from"./Alert-C6MwJ7WU.js";import{_ as I}from"./DSDurationInput-BR4P5Xx2.js";import{_ as R}from"./DSTooltip-BO4NaqKm.js";/* empty css            */const X={class:"md:flex md:items-center md:justify-between max-w-2xl"},Y={class:"min-w-0 flex-1"},J={class:"flex items-center"},K={class:"flex flex-col sm:flex-row sm:justify-between"},Q={class:"py-2"},W={class:"flex justify-end space-x-3"},Z={key:0},ee={key:1},te={class:"list-disc list-inside"},se={class:"grid grid-cols-2 gap-4"},le={class:"mt-1"},oe={class:"space-y-4"},re={class:"flex justify-between items-center"},ne={class:"space-y-2"},ae={class:"flex-1"},ie=["onUpdate:modelValue"],de={class:"flex-1"},ue=["onChange"],me=["onClick"],pe={class:"flex items-center justify-end space-x-4"},fe={key:0},ce={key:1},Ve={__name:"Create",props:{band:{type:Object,required:!0}},setup(p){const x=p,l=O({band_id:x.band.id,name:null,duration:null,duration_seconds:null,notes:null,url:null,bpm:null,artist:null,files:[],spotify_link:null}),u=$([]),M=()=>{u.value.length<10&&u.value.push({type:"",file:null})},j=n=>{u.value.splice(n,1)},U=(n,e)=>{const o=n.target.files[0];o&&(u.value[e].file=o)},h=()=>{l.files=u.value.filter(n=>n.file&&n.type).map(n=>({type:n.type,file:n.file})),l.post(route("songs.store",x.band.id))},A=g(()=>!!l.name||!!l.duration||!!l.notes||!!l.url||!!l.artist||!!l.bpm),B=L(),F=g(()=>B.props.trial||{}),N=g(()=>{var n,e;return(n=F.value)!=null&&n.isSubscribed?!0:((e=x.songs)==null?void 0:e.length)<10});return(n,e)=>(i(),d(w,null,[r(s(T),{title:"Add New Song"}),r(G,{class:"space-y-2"},{header:a(()=>[t("div",X,[t("div",Y,[t("div",J,[r(s(b),{href:n.route("bands.show",p.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:a(()=>[m(V(p.band.name),1)]),_:1},8,["href"]),e[9]||(e[9]=t("svg",{class:"mx-2 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),r(s(b),{href:n.route("songs.index",p.band.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:a(()=>e[8]||(e[8]=[m(" Songs ")])),_:1},8,["href"])]),t("div",K,[e[13]||(e[13]=t("h2",{class:"mt-1 text-2xl font-bold leading-7 text-neutral-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Add New Song ",-1)),t("div",Q,[N.value?(i(),k(s(b),{key:1,href:n.route("songs.bulk-create",p.band.id)},{default:a(()=>[r(s(f),{variant:"secondary",class:"w-full sm:w-auto"},{default:a(()=>e[12]||(e[12]=[t("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),m(" Add Multiple Songs ")])),_:1})]),_:1},8,["href"])):(i(),k(s(R),{key:0},{content:a(()=>e[11]||(e[11]=[m(" Free trial allows maximum 10 songs. Please subscribe to add more. ")])),default:a(()=>[r(s(f),{variant:"secondary",class:"w-full sm:w-auto",disabled:""},{default:a(()=>e[10]||(e[10]=[t("svg",{class:"-ml-0.5 mr-1.5 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V7a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),m(" Add Multiple Songs ")])),_:1})]),_:1}))])]),e[14]||(e[14]=t("p",{class:"mt-1 text-sm text-neutral-500"}," Add a new song to your band's library ",-1))])])]),default:a(()=>[r(s(S),{class:"max-w-2xl space-y-6 p-6 mb-4",disabled:A.value},{default:a(()=>[e[15]||(e[15]=t("p",{class:"text-sm text-gray-600"},"Enter a Spotify track URL to import its details.",-1)),r(s(c),{modelValue:s(l).spotify_link,"onUpdate:modelValue":e[0]||(e[0]=o=>s(l).spotify_link=o),type:"url",placeholder:"https://open.spotify.com/track/abc123",label:"Spotify Link",error:s(l).errors.spotify_link,required:""},null,8,["modelValue","error"]),t("div",W,[r(s(f),{onClick:h,variant:"primary",disabled:s(l).processing},{default:a(()=>[s(l).processing?(i(),d("span",Z,"Importing...")):(i(),d("span",ee,"Import Song"))]),_:1},8,["disabled"])])]),_:1},8,["disabled"]),r(s(S),{class:"max-w-2xl",disabled:!!s(l).spotify_link},{default:a(()=>[t("form",{onSubmit:D(h,["prevent"]),class:"space-y-6 p-6"},[e[25]||(e[25]=t("p",{class:"text-sm text-gray-600"},"Or manually add a song's for your list.",-1)),Object.keys(s(l).errors).length>0?(i(),k(s(H),{key:0,type:"error"},{default:a(()=>[t("ul",te,[(i(!0),d(w,null,_(s(l).errors,o=>(i(),d("li",{key:o},V(o),1))),128))])]),_:1})):P("",!0),t("div",se,[t("div",null,[r(s(c),{modelValue:s(l).name,"onUpdate:modelValue":e[1]||(e[1]=o=>s(l).name=o),type:"text",label:"Song Name",error:s(l).errors.name,required:""},null,8,["modelValue","error"])]),t("div",null,[r(s(c),{modelValue:s(l).artist,"onUpdate:modelValue":e[2]||(e[2]=o=>s(l).artist=o),type:"text",label:"Artist (Optional)",error:s(l).errors.artist,placeholder:""},null,8,["modelValue","error"])]),t("div",null,[r(s(I),{modelValue:s(l).duration,"onUpdate:modelValue":e[3]||(e[3]=o=>s(l).duration=o),"onUpdate:seconds":e[4]||(e[4]=o=>s(l).duration_seconds=o),label:"Duration",error:s(l).errors.duration_seconds,required:""},null,8,["modelValue","error"])]),t("div",null,[r(s(c),{modelValue:s(l).bpm,"onUpdate:modelValue":e[5]||(e[5]=o=>s(l).bpm=o),type:"number",label:"BPM (Optional)",error:s(l).errors.bpm},null,8,["modelValue","error"])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-neutral-700"}," Notes (Optional) ",-1)),t("div",le,[C(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=o=>s(l).notes=o),rows:"4",class:q(["block w-full rounded-lg shadow-sm transition-colors duration-200","border-neutral-300 focus:border-primary-500 focus:ring-primary-500",{"border-error-500 focus:border-error-500 focus:ring-error-500":s(l).errors.notes}])},null,2),[[z,s(l).notes]])]),e[17]||(e[17]=t("p",{class:"mt-1 text-sm text-neutral-500"}," Add any notes about the song, such as key changes or special instructions ",-1))]),t("div",null,[r(s(c),{modelValue:s(l).url,"onUpdate:modelValue":e[7]||(e[7]=o=>s(l).url=o),type:"url",label:"External Link (Optional)",error:s(l).errors.url,placeholder:"https://"},null,8,["modelValue","error"]),e[18]||(e[18]=t("p",{class:"mt-1 text-sm text-neutral-500"}," Link to an external resource (YouTube, Spotify, etc.) ",-1))]),t("div",oe,[t("div",re,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-neutral-900"},"Files",-1)),r(s(f),{type:"button",variant:"secondary",onClick:M,disabled:u.value.length>=10},{default:a(()=>e[19]||(e[19]=[m(" Add File ")])),_:1},8,["disabled"])]),t("div",ne,[(i(!0),d(w,null,_(u.value,(o,v)=>(i(),d("div",{key:v,class:"flex items-center gap-4 border rounded-md p-3"},[t("div",ae,[C(t("select",{"onUpdate:modelValue":y=>o.type=y,class:"block w-full rounded-md border-neutral-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},e[21]||(e[21]=[t("option",{value:""},"Select Type",-1),t("option",{value:"lyrics"},"Lyrics",-1),t("option",{value:"notes"},"Notes",-1),t("option",{value:"chords"},"Chords",-1),t("option",{value:"tabs"},"Tabs",-1),t("option",{value:"sheet_music"},"Sheet Music",-1),t("option",{value:"other"},"Other",-1)]),8,ie),[[E,o.type]])]),t("div",de,[t("input",{type:"file",onChange:y=>U(y,v),accept:".pdf,.txt",class:"block w-full text-sm"},null,40,ue)]),t("button",{type:"button",onClick:y=>j(v),class:"text-neutral-400 hover:text-neutral-500"},e[22]||(e[22]=[t("span",{class:"sr-only"},"Remove",-1),t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,me)]))),128))]),e[23]||(e[23]=t("p",{class:"text-sm text-neutral-500"},"PDF or TXT files up to 10MB",-1))]),t("div",pe,[r(s(b),{href:n.route("songs.index",p.band.id)},{default:a(()=>[r(s(f),{type:"button",variant:"outline"},{default:a(()=>e[24]||(e[24]=[m(" Cancel ")])),_:1})]),_:1},8,["href"]),r(s(f),{type:"submit",variant:"primary",disabled:s(l).processing},{default:a(()=>[s(l).processing?(i(),d("span",fe,"Creating...")):(i(),d("span",ce,"Create Song"))]),_:1},8,["disabled"])])],32)]),_:1},8,["disabled"])]),_:1})],64))}};export{Ve as default};
